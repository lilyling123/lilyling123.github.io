<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="title: 计算机网络学习笔记highlight:
line_number: true

计算机网络学习笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/2017/02/15/计算机网络/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="title: 计算机网络学习笔记highlight:
line_number: true

计算机网络学习笔记">
<meta property="og:updated_time" content="2017-02-25T12:41:33.645Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description" content="title: 计算机网络学习笔记highlight:
line_number: true

计算机网络学习笔记">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/02/15/计算机网络/"/>





  <title>  | Hexo </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Hexo</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/15/计算机网络/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="John Doe">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-15T21:18:45+08:00">
                2017-02-15
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <hr>
<p>title: 计算机网络学习笔记<br>highlight:</p>
<pre><code>line_number: true
</code></pre><hr>
<p>计算机网络学习笔记</p>
<a id="more"></a>
<h1 id="计算机网络概述上"><a href="#计算机网络概述上" class="headerlink" title="计算机网络概述上"></a>计算机网络概述上</h1><h3 id="什么是计算机网络"><a href="#什么是计算机网络" class="headerlink" title="什么是计算机网络"></a>什么是计算机网络</h3><p>计算机网络是通信技术和计算机技术结合的产物<br>计算机网络就是一种通信网络<br>定义：计算机网络是一个互连的，自治的计算机集合  </p>
<h4 id="距离远、规模很大时怎么连接？"><a href="#距离远、规模很大时怎么连接？" class="headerlink" title="距离远、规模很大时怎么连接？"></a>距离远、规模很大时怎么连接？</h4><p>通过交换网络互连主机</p>
<h4 id="交换网络"><a href="#交换网络" class="headerlink" title="交换网络"></a>交换网络</h4><p>交换节点：路由器或交换机</p>
<h4 id="什么是Internet"><a href="#什么是Internet" class="headerlink" title="什么是Internet"></a>什么是Internet</h4><p>是全球性的最大的互联网络<br>ISP网络互连的“网络之网络”  </p>
<h4 id="数以百万级的互联的计算设备的集合：主机-端系统"><a href="#数以百万级的互联的计算设备的集合：主机-端系统" class="headerlink" title="数以百万级的互联的计算设备的集合：主机/端系统"></a>数以百万级的互联的计算设备的集合：主机/端系统</h4><h4 id="通过通信链路连接在一起"><a href="#通过通信链路连接在一起" class="headerlink" title="通过通信链路连接在一起"></a>通过通信链路连接在一起</h4><h4 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h4><p>使用路由器或交换机</p>
<h3 id="为什么需要网络协议"><a href="#为什么需要网络协议" class="headerlink" title="为什么需要网络协议"></a>为什么需要网络协议</h3><p>协议是计算机网络有序运行的重要保证  </p>
<h4 id="任何通信或信息交换过程都需要规则"><a href="#任何通信或信息交换过程都需要规则" class="headerlink" title="任何通信或信息交换过程都需要规则"></a>任何通信或信息交换过程都需要规则</h4><p>网络通信的通信主体是“机器”</p>
<h4 id="网络协议是为进行网络中的数据交换而建立的规则、标准或约定"><a href="#网络协议是为进行网络中的数据交换而建立的规则、标准或约定" class="headerlink" title="网络协议是为进行网络中的数据交换而建立的规则、标准或约定"></a>网络协议是为进行网络中的数据交换而建立的规则、标准或约定</h4><h4 id="协议规定了通信实体之间所交换的信息的格式、意义、顺序以及针对收到信息或发生的事件所采取的的“动作”"><a href="#协议规定了通信实体之间所交换的信息的格式、意义、顺序以及针对收到信息或发生的事件所采取的的“动作”" class="headerlink" title="协议规定了通信实体之间所交换的信息的格式、意义、顺序以及针对收到信息或发生的事件所采取的的“动作”"></a>协议规定了通信实体之间所交换的信息的格式、意义、顺序以及针对收到信息或发生的事件所采取的的“动作”</h4><h3 id="协议的三要素"><a href="#协议的三要素" class="headerlink" title="协议的三要素"></a>协议的三要素</h3><ol>
<li>语法：数据与控制信息的结构或格式</li>
<li>语义：需要发出何种控制信息，完成何种动作以及做出何种响应，差错控制</li>
<li>时序：事件顺序、顺序匹配</li>
</ol>
<h4 id="协议规范了网络中的所有信息发送和接收过程"><a href="#协议规范了网络中的所有信息发送和接收过程" class="headerlink" title="协议规范了网络中的所有信息发送和接收过程"></a>协议规范了网络中的所有信息发送和接收过程</h4><h3 id="Internet结构"><a href="#Internet结构" class="headerlink" title="Internet结构"></a>Internet结构</h3><h4 id="端系统通过接入ISP（access-ISPs）连接到Internet"><a href="#端系统通过接入ISP（access-ISPs）连接到Internet" class="headerlink" title="端系统通过接入ISP（access ISPs）连接到Internet"></a>端系统通过接入ISP（access ISPs）连接到Internet</h4><h4 id="接入ISP必须进一步互连"><a href="#接入ISP必须进一步互连" class="headerlink" title="接入ISP必须进一步互连"></a>接入ISP必须进一步互连</h4><h4 id="构成复杂的网络互连的网络"><a href="#构成复杂的网络互连的网络" class="headerlink" title="构成复杂的网络互连的网络"></a>构成复杂的网络互连的网络</h4><h3 id="ISP是如何互连在一起的呢？"><a href="#ISP是如何互连在一起的呢？" class="headerlink" title="ISP是如何互连在一起的呢？"></a>ISP是如何互连在一起的呢？</h3><p>直接互连不适用于大规模网络</p>
<h4 id="构建一个全球ISP"><a href="#构建一个全球ISP" class="headerlink" title="构建一个全球ISP"></a>构建一个全球ISP</h4><h4 id="ISP之间也必须互连"><a href="#ISP之间也必须互连" class="headerlink" title="ISP之间也必须互连"></a>ISP之间也必须互连</h4><ol>
<li>使用对等链接</li>
<li>使用IXP</li>
</ol>
<h4 id="区域IXP"><a href="#区域IXP" class="headerlink" title="区域IXP"></a>区域IXP</h4><h4 id="一级ISPs"><a href="#一级ISPs" class="headerlink" title="一级ISPs"></a>一级ISPs</h4><h4 id="内容提供商网络"><a href="#内容提供商网络" class="headerlink" title="内容提供商网络"></a>内容提供商网络</h4><h3 id="数据交换"><a href="#数据交换" class="headerlink" title="数据交换"></a>数据交换</h3><p>如果将源主机发送的数据通过网络核心发送到目的主机？</p>
<h4 id="为什么需要数据交换"><a href="#为什么需要数据交换" class="headerlink" title="为什么需要数据交换"></a>为什么需要数据交换</h4><p>构建一个交换网络帮助我们进行数据传输</p>
<h4 id="交换？"><a href="#交换？" class="headerlink" title="交换？"></a>交换？</h4><p>动态转接<br>动态分配传输资源</p>
<h4 id="数据交换的类型"><a href="#数据交换的类型" class="headerlink" title="数据交换的类型"></a>数据交换的类型</h4><ol>
<li>电路交换</li>
<li>报文交换</li>
<li>分组交换</li>
</ol>
<h4 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h4><ol>
<li>建立连接</li>
<li>通信</li>
<li>释放连接</li>
</ol>
<p>独占资源</p>
<h4 id="如何共享电路交换网络中的中继线？"><a href="#如何共享电路交换网络中的中继线？" class="headerlink" title="如何共享电路交换网络中的中继线？"></a>如何共享电路交换网络中的中继线？</h4><p>多路复用技术</p>
<h3 id="多路复用"><a href="#多路复用" class="headerlink" title="多路复用"></a>多路复用</h3><p>简称复用，是通信技术中的基本概念</p>
<h4 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h4><p>链路/网络资源划分为“资源片”  </p>
<ol>
<li>将资源片分配给各路“呼叫”</li>
<li>每路呼叫独占分配到的资源片进行通信</li>
<li>资源片可能“闲置”</li>
</ol>
<h4 id="典型多路复用方法"><a href="#典型多路复用方法" class="headerlink" title="典型多路复用方法"></a>典型多路复用方法</h4><ol>
<li>频分多路复用：在频率上进行划分  </li>
<li>时分多路复用：将时间划分为一段段等长的时分复用帧，每个用户在每个TDM帧中占用固定序号的时隙  </li>
<li>波分多路复用：就是光的频分复用  </li>
<li>码分多路复用：每个用户分配唯一的m bit码片序列，使用对应的码片序列编码数据，各用户码片序列相互正交，解码</li>
</ol>
<h3 id="报文交换和分组交换"><a href="#报文交换和分组交换" class="headerlink" title="报文交换和分组交换"></a>报文交换和分组交换</h3><h4 id="报文"><a href="#报文" class="headerlink" title="报文"></a>报文</h4><p>报文：源发送信息整体</p>
<h4 id="分组交换-1"><a href="#分组交换-1" class="headerlink" title="分组交换"></a>分组交换</h4><p>将报文拆出来的一系列相对较小的数据包，要重新打包加上头部，才构成一个分组<br>产生额外开销</p>
<h4 id="统计多路复用"><a href="#统计多路复用" class="headerlink" title="统计多路复用"></a>统计多路复用</h4><p>按需共享链路</p>
<h4 id="存储-转发"><a href="#存储-转发" class="headerlink" title="存储-转发"></a>存储-转发</h4><p>先接收分组，存储，再决定怎么发出去</p>
<h3 id="对比两种交换方式"><a href="#对比两种交换方式" class="headerlink" title="对比两种交换方式"></a>对比两种交换方式</h3><h4 id="分组交换：传输延迟"><a href="#分组交换：传输延迟" class="headerlink" title="分组交换：传输延迟"></a>分组交换：传输延迟</h4><p>分组交换技术优于报文交换技术：表现在传输需要的时间和缓存都要少很多</p>
<h1 id="计算机网络概述下"><a href="#计算机网络概述下" class="headerlink" title="计算机网络概述下"></a>计算机网络概述下</h1><h2 id="计算机网络性能"><a href="#计算机网络性能" class="headerlink" title="计算机网络性能"></a>计算机网络性能</h2><h4 id="速率"><a href="#速率" class="headerlink" title="速率"></a>速率</h4><p>速率即数据率也是数据传输速率或者比特率：单位时间传输信息量<br>计算机网络中最重要的一个性能指标<br>单位：b/s,kb/s,Mb/s,Gb/s<br>速率往往是额定速率或标称速率：实际中未必达的到</p>
<h4 id="带宽"><a href="#带宽" class="headerlink" title="带宽"></a>带宽</h4><p>信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹<br>网络的“带宽”通常是数字信道所能传送的“最高数据率”</p>
<h4 id="延迟-时延"><a href="#延迟-时延" class="headerlink" title="延迟/时延"></a>延迟/时延</h4><p>为什么在分组交换时发生丢包和时延？<br>分组在路由器缓存中排队</p>
<h4 id="四种分组延迟"><a href="#四种分组延迟" class="headerlink" title="四种分组延迟"></a>四种分组延迟</h4><ol>
<li>节点处理延迟  </li>
<li>排队延迟  </li>
<li>传输延迟  </li>
<li>传播延迟</li>
</ol>
<h4 id="时延带宽积"><a href="#时延带宽积" class="headerlink" title="时延带宽积"></a>时延带宽积</h4><p>传播时延*带宽：以比特为单位的链路长度</p>
<h4 id="分组丢失（丢包）"><a href="#分组丢失（丢包）" class="headerlink" title="分组丢失（丢包）"></a>分组丢失（丢包）</h4><p>队列缓存容量有限<br>分组到达已满队列将被丢弃<br>丢弃分组可能由前序节点或源重发<br>丢包率</p>
<h4 id="吞吐量-率"><a href="#吞吐量-率" class="headerlink" title="吞吐量/率"></a>吞吐量/率</h4><p>表示在发送端与接收端之间传送数据速率<br>即时吞吐量：<br>平均吞吐量：  </p>
<h4 id="吞吐量瓶颈"><a href="#吞吐量瓶颈" class="headerlink" title="吞吐量瓶颈"></a>吞吐量瓶颈</h4><h3 id="为什么需要计算机网络体系结构"><a href="#为什么需要计算机网络体系结构" class="headerlink" title="为什么需要计算机网络体系结构"></a>为什么需要计算机网络体系结构</h3><h4 id="计算机网络是一个非常复杂的系统，涉及许多组成部分"><a href="#计算机网络是一个非常复杂的系统，涉及许多组成部分" class="headerlink" title="计算机网络是一个非常复杂的系统，涉及许多组成部分"></a>计算机网络是一个非常复杂的系统，涉及许多组成部分</h4><h3 id="分层结构"><a href="#分层结构" class="headerlink" title="分层结构"></a>分层结构</h3><p>从功能上描述计算机网络结构</p>
<h4 id="每层遵循某个-写网络协议完成本层功能"><a href="#每层遵循某个-写网络协议完成本层功能" class="headerlink" title="每层遵循某个/写网络协议完成本层功能"></a>每层遵循某个/写网络协议完成本层功能</h4><p>计算机网络体系结构是计算机网络的各层及其协议的集合<br>体系结构是抽象的</p>
<h4 id="体系结构"><a href="#体系结构" class="headerlink" title="体系结构"></a>体系结构</h4><p>是一个计算机网络的功能层次及其关系的定义  </p>
<h3 id="为什么要采用分层结构"><a href="#为什么要采用分层结构" class="headerlink" title="为什么要采用分层结构"></a>为什么要采用分层结构</h3><ol>
<li>结构清晰，有利于识别复杂系统的部件及其关系</li>
<li>模块化的分层易于系统更新、维护</li>
<li>有利于标准化</li>
</ol>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>实体：表示任何可以发送或接收信息的硬件或软件进程<br>协议是控制两个对等实体进行通信的规则的集合，协议是“水平”的<br>任一层实体需要使用下层服务，遵循本层协议，实现本层功能，向上层提供服务，服务是“垂直的”<br>下层协议的实现对上层的服务用户是透明的<br>同系统的相邻层实体键通过接口进行交互，通过服务访问点SAP，交换原语，指定请求的特定服务</p>
<h3 id="OSI参考模型"><a href="#OSI参考模型" class="headerlink" title="OSI参考模型"></a>OSI参考模型</h3><p>目的是支持异构网络系统的互联互通<br>将网络划分为7层</p>
<h4 id="OSI参考模型解释的通信过程"><a href="#OSI参考模型解释的通信过程" class="headerlink" title="OSI参考模型解释的通信过程"></a>OSI参考模型解释的通信过程</h4><h4 id="为什么要数据封装"><a href="#为什么要数据封装" class="headerlink" title="为什么要数据封装"></a>为什么要数据封装</h4><p>增加控制信息<br>控制信息主要包括：<br>地址<br>差错检测编码<br>协议控制</p>
<h3 id="物理层功能"><a href="#物理层功能" class="headerlink" title="物理层功能"></a>物理层功能</h3><h4 id="接口特性"><a href="#接口特性" class="headerlink" title="接口特性"></a>接口特性</h4><ol>
<li>机械特性</li>
<li>电器特性</li>
<li>功能特性</li>
<li>规程特性</li>
</ol>
<h4 id="主要解决的问题：比特编码"><a href="#主要解决的问题：比特编码" class="headerlink" title="主要解决的问题：比特编码"></a>主要解决的问题：比特编码</h4><h4 id="定义数据率"><a href="#定义数据率" class="headerlink" title="定义数据率"></a>定义数据率</h4><h4 id="比特同步"><a href="#比特同步" class="headerlink" title="比特同步"></a>比特同步</h4><p>时钟同步</p>
<h4 id="传输模式"><a href="#传输模式" class="headerlink" title="传输模式"></a>传输模式</h4><ol>
<li>单工模式（单向）  </li>
<li>半双工  </li>
<li>全双工</li>
</ol>
<h3 id="数据链路层功能"><a href="#数据链路层功能" class="headerlink" title="数据链路层功能"></a>数据链路层功能</h3><h4 id="负责结点-结点的数据传输"><a href="#负责结点-结点的数据传输" class="headerlink" title="负责结点-结点的数据传输"></a>负责结点-结点的数据传输</h4><h4 id="组帧"><a href="#组帧" class="headerlink" title="组帧"></a>组帧</h4><h4 id="物理寻址"><a href="#物理寻址" class="headerlink" title="物理寻址"></a>物理寻址</h4><p>在帧头中增加发送端和/或接收端的物理地址，标识数据帧的发送端和/或接收端</p>
<h4 id="流量控制"><a href="#流量控制" class="headerlink" title="流量控制"></a>流量控制</h4><p>避免淹没接收端</p>
<h4 id="差错控制"><a href="#差错控制" class="headerlink" title="差错控制"></a>差错控制</h4><h4 id="接入-访问控制"><a href="#接入-访问控制" class="headerlink" title="接入/访问控制"></a>接入/访问控制</h4><h3 id="网络层功能"><a href="#网络层功能" class="headerlink" title="网络层功能"></a>网络层功能</h3><h4 id="负责源主机到目的主机数据分组交付"><a href="#负责源主机到目的主机数据分组交付" class="headerlink" title="负责源主机到目的主机数据分组交付"></a>负责源主机到目的主机数据分组交付</h4><p>可能会跨越多个网络</p>
<h4 id="逻辑寻址"><a href="#逻辑寻址" class="headerlink" title="逻辑寻址"></a>逻辑寻址</h4><p>全局唯一逻辑地址，ip地址，确保数据分组被正确送到目的地</p>
<h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><p>路由器<br>路径转发  </p>
<h4 id="分组转发"><a href="#分组转发" class="headerlink" title="分组转发"></a>分组转发</h4><h3 id="传输层功能"><a href="#传输层功能" class="headerlink" title="传输层功能"></a>传输层功能</h3><h4 id="负责源-目的（端-端）进程间-完整报文传输"><a href="#负责源-目的（端-端）进程间-完整报文传输" class="headerlink" title="负责源-目的（端-端）进程间 完整报文传输"></a>负责源-目的（端-端）进程间 完整报文传输</h4><p>报文的分段与重组<br>SAP寻址：Internet中相当于端口号  </p>
<h4 id="连接控制"><a href="#连接控制" class="headerlink" title="连接控制"></a>连接控制</h4><h4 id="流量控制-1"><a href="#流量控制-1" class="headerlink" title="流量控制"></a>流量控制</h4><h4 id="差错控制-1"><a href="#差错控制-1" class="headerlink" title="差错控制"></a>差错控制</h4><h3 id="会话层功能"><a href="#会话层功能" class="headerlink" title="会话层功能"></a>会话层功能</h3><h4 id="对话控制"><a href="#对话控制" class="headerlink" title="对话控制"></a>对话控制</h4><p>建立，维护</p>
<h4 id="同步"><a href="#同步" class="headerlink" title="同步"></a>同步</h4><p>在数据流中插入“同步点”</p>
<h3 id="表示层功能"><a href="#表示层功能" class="headerlink" title="表示层功能"></a>表示层功能</h3><h4 id="数据表示转化"><a href="#数据表示转化" class="headerlink" title="数据表示转化"></a>数据表示转化</h4><p>转换为主机独立的编码</p>
<h4 id="加密-解密"><a href="#加密-解密" class="headerlink" title="加密/解密"></a>加密/解密</h4><h4 id="压缩-解压缩"><a href="#压缩-解压缩" class="headerlink" title="压缩/解压缩"></a>压缩/解压缩</h4><h3 id="应用层功能"><a href="#应用层功能" class="headerlink" title="应用层功能"></a>应用层功能</h3><h4 id="支持用户通过用户代理或网络接口使用网络服务"><a href="#支持用户通过用户代理或网络接口使用网络服务" class="headerlink" title="支持用户通过用户代理或网络接口使用网络服务"></a>支持用户通过用户代理或网络接口使用网络服务</h4><h4 id="典型应用层服务"><a href="#典型应用层服务" class="headerlink" title="典型应用层服务"></a>典型应用层服务</h4><p>FTP<br>SMTP<br>HTTP</p>
<h3 id="TCP-IP参考模型"><a href="#TCP-IP参考模型" class="headerlink" title="TCP/IP参考模型"></a>TCP/IP参考模型</h3><p>应用层-&gt;运输层 -&gt;网际层 -&gt;网络接口层</p>
<h4 id="运输层"><a href="#运输层" class="headerlink" title="运输层"></a>运输层</h4><p>TCP，UDP</p>
<h4 id="网际层"><a href="#网际层" class="headerlink" title="网际层"></a>网际层</h4><p>IP  </p>
<p>TCP——&gt;HTTP,SMTP<br>UDP——&gt;DNS</p>
<h3 id="5层参考模型"><a href="#5层参考模型" class="headerlink" title="5层参考模型"></a>5层参考模型</h3><ol>
<li>应用层  </li>
<li>传输层  </li>
<li>网络层  </li>
<li>数据链路层  </li>
<li>物理层</li>
</ol>
<h4 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h4><p>源主机到目的主机的数据分组路由和转发：IP协议，路由协议等</p>
<h4 id="链路层"><a href="#链路层" class="headerlink" title="链路层"></a>链路层</h4><p>相邻网络元素的数据传输：以太网</p>
<h4 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h4><p>比特传输</p>
<h1 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h1><ol>
<li>网络应用体系结构</li>
<li>网络应用的服务需求</li>
<li>Internet传输层服务模型</li>
<li>特性网络应用及协议</li>
<li>Socket编程</li>
</ol>
<h2 id="网络应用的体系结构"><a href="#网络应用的体系结构" class="headerlink" title="网络应用的体系结构"></a>网络应用的体系结构</h2><h3 id="与单机应用有哪些本质性的不同"><a href="#与单机应用有哪些本质性的不同" class="headerlink" title="与单机应用有哪些本质性的不同"></a>与单机应用有哪些本质性的不同</h3><h3 id="应采用什么养的吧体系结构"><a href="#应采用什么养的吧体系结构" class="headerlink" title="应采用什么养的吧体系结构"></a>应采用什么养的吧体系结构</h3><ol>
<li>客户机/服务器结构，C/S</li>
<li>点对点结构，P2P</li>
<li>混合结构Hybrid</li>
</ol>
<h4 id="客户机-服务器结构"><a href="#客户机-服务器结构" class="headerlink" title="客户机/服务器结构"></a>客户机/服务器结构</h4><ol>
<li>服务器是对外提供服务的软件</li>
<li>客户机是使用服务器的服务</li>
</ol>
<h4 id="P2P结构"><a href="#P2P结构" class="headerlink" title="P2P结构"></a>P2P结构</h4><ol>
<li>没有永远在线的服务器</li>
<li>任何端系统/节点之间可以直接通讯</li>
<li>节点间歇性接入网络</li>
<li>节点可能改变IP地址</li>
</ol>
<p>优点：高度可伸缩<br>缺点：难于管理</p>
<h4 id="混合结构"><a href="#混合结构" class="headerlink" title="混合结构"></a>混合结构</h4><p>Napster<br>文件传输使用P2P结构，文件的搜索采用C/S结构</p>
<h3 id="网络应用间通信"><a href="#网络应用间通信" class="headerlink" title="网络应用间通信"></a>网络应用间通信</h3><h4 id="网络应用的基础：进程间通信"><a href="#网络应用的基础：进程间通信" class="headerlink" title="网络应用的基础：进程间通信"></a>网络应用的基础：进程间通信</h4><h4 id="同一主机上运行的进程之间如何通信"><a href="#同一主机上运行的进程之间如何通信" class="headerlink" title="同一主机上运行的进程之间如何通信"></a>同一主机上运行的进程之间如何通信</h4><h4 id="不同主机上运行的进程间如何通信"><a href="#不同主机上运行的进程间如何通信" class="headerlink" title="不同主机上运行的进程间如何通信"></a>不同主机上运行的进程间如何通信</h4><p>消息交换（报文交换）  </p>
<ol>
<li>客户机进程：发起通信的进程  </li>
<li>服务器进程：响应通信</li>
</ol>
<h4 id="套接字：Socket"><a href="#套接字：Socket" class="headerlink" title="套接字：Socket"></a>套接字：Socket</h4><p>通过套接字的抽象使用网络下层提供的服务，如TCP  </p>
<p>进程间通信利用socket发送/接受信息实现  </p>
<p>类似于寄信  </p>
<p>传输基础设施向进程提供API  </p>
<ol>
<li>传输协议的选择</li>
<li>参数的设置</li>
</ol>
<h4 id="如何寻址进程？"><a href="#如何寻址进程？" class="headerlink" title="如何寻址进程？"></a>如何寻址进程？</h4><p>不同主机上的进程间通信，那么每个进程必须有标识符</p>
<h4 id="如何寻址主机？——IP地址"><a href="#如何寻址主机？——IP地址" class="headerlink" title="如何寻址主机？——IP地址"></a>如何寻址主机？——IP地址</h4><h4 id="端口号-Port-number可以寻址进程"><a href="#端口号-Port-number可以寻址进程" class="headerlink" title="端口号/Port number可以寻址进程"></a>端口号/Port number可以寻址进程</h4><h4 id="IP地址-端口号进行进程间通信"><a href="#IP地址-端口号进行进程间通信" class="headerlink" title="IP地址+端口号进行进程间通信"></a>IP地址+端口号进行进程间通信</h4><h3 id="应用层协议"><a href="#应用层协议" class="headerlink" title="应用层协议"></a>应用层协议</h3><p>网络应用需遵循应用层协议<br>公开协议：由RFC定义——允许互操作，HTTP，SMTP…<br>私有协议：多数P2P文件共享应用</p>
<h4 id="应用层协议的内容"><a href="#应用层协议的内容" class="headerlink" title="应用层协议的内容"></a>应用层协议的内容</h4><ol>
<li>消息的类型</li>
<li>消息的语法格式</li>
<li>字段的语义</li>
<li>规则：进程何时发送/响应消息</li>
</ol>
<h3 id="网络应用的需求与传输层服务"><a href="#网络应用的需求与传输层服务" class="headerlink" title="网络应用的需求与传输层服务"></a>网络应用的需求与传输层服务</h3><h4 id="网络应用对传输服务的需求"><a href="#网络应用对传输服务的需求" class="headerlink" title="网络应用对传输服务的需求"></a>网络应用对传输服务的需求</h4><ol>
<li>数据丢失/可靠性  </li>
<li>时间/延迟</li>
<li>带宽</li>
<li>安全性</li>
</ol>
<h4 id="Internet提供的传输服务"><a href="#Internet提供的传输服务" class="headerlink" title="Internet提供的传输服务"></a>Internet提供的传输服务</h4><p>TCP服务：</p>
<ol>
<li>面向连接</li>
<li>可靠地传输</li>
<li>流量控制</li>
<li>拥塞控制</li>
<li>不提供时间/延迟保障</li>
<li>不提供最小带宽保障</li>
</ol>
<p>UDP服务：</p>
<ol>
<li>无连接</li>
<li>不可靠的数据传输</li>
<li>不提供可靠性保障，流量控制，拥塞控制，延迟保障，带宽保障</li>
</ol>
<h2 id="Web应用"><a href="#Web应用" class="headerlink" title="Web应用"></a>Web应用</h2><h3 id="Web与HTTP"><a href="#Web与HTTP" class="headerlink" title="Web与HTTP"></a>Web与HTTP</h3><p>组成  </p>
<ol>
<li>网页</li>
<li>网页互相连接</li>
</ol>
<h4 id="网页包含多个对象"><a href="#网页包含多个对象" class="headerlink" title="网页包含多个对象"></a>网页包含多个对象</h4><ol>
<li>对象：HTML文件，图片，视频文件，动态脚本</li>
<li>基本HTML文件，包含对其他对象引用的连接<h4 id="对象的寻址"><a href="#对象的寻址" class="headerlink" title="对象的寻址"></a>对象的寻址</h4>URL：统一资源定位器</li>
</ol>
<h4 id="HTTP协议概述"><a href="#HTTP协议概述" class="headerlink" title="HTTP协议概述"></a>HTTP协议概述</h4><p>超文本传输协议  </p>
<h4 id="C-S结构"><a href="#C-S结构" class="headerlink" title="C/S结构"></a>C/S结构</h4><p>客户：Browser<br>服务器：Server</p>
<h4 id="传入层协议"><a href="#传入层协议" class="headerlink" title="传入层协议"></a>传入层协议</h4><p>使用TCP传入服务</p>
<h4 id="是一个无状态协议"><a href="#是一个无状态协议" class="headerlink" title="是一个无状态协议"></a>是一个无状态协议</h4><h3 id="HTTP连接"><a href="#HTTP连接" class="headerlink" title="HTTP连接"></a>HTTP连接</h3><p>两种类型  </p>
<ol>
<li>非持久性连接HTTP1.0：只能有一个连接</li>
<li>持久性连接HTTP1.1：可以有多个连接</li>
</ol>
<h4 id="非持久性连接"><a href="#非持久性连接" class="headerlink" title="非持久性连接"></a>非持久性连接</h4><ol>
<li>客户端先发起TCP请求</li>
<li>服务器接受TCP连接请求，并且通知客户端</li>
<li>HTTP客户端将请求内容和URL发送过去</li>
<li>HTTP服务器接受消息，解析，产生响应发送给客户端，关闭TCP连接</li>
<li>HTTP客户端收到响应消息，解析显示出来，如果发现有图片对象的超链接</li>
<li>为每个图片对象重复步骤1-5</li>
</ol>
<h4 id="非持久性连接的问题"><a href="#非持久性连接的问题" class="headerlink" title="非持久性连接的问题"></a>非持久性连接的问题</h4><ol>
<li>每个对象需要2个RTT</li>
<li>操作系统需要为每个TCP连接开销资源</li>
<li>浏览器会怎么做？：打开多个并行的TCP连接以获取网页所需对象，给服务端造成什么影响？服务端开销很大</li>
</ol>
<h4 id="持久性连接"><a href="#持久性连接" class="headerlink" title="持久性连接"></a>持久性连接</h4><ol>
<li>发送响应后，服务器保持TCP连接的打开</li>
<li>后续的HTTP消息可以通过这个连接发送</li>
</ol>
<h4 id="无流水的持久性连接"><a href="#无流水的持久性连接" class="headerlink" title="无流水的持久性连接"></a>无流水的持久性连接</h4><p>客户端只有收到前一个响应后才发送新的请求，每个被引用的对象耗时1个RTT</p>
<h4 id="带流水机制的持久性连接"><a href="#带流水机制的持久性连接" class="headerlink" title="带流水机制的持久性连接"></a>带流水机制的持久性连接</h4><ol>
<li>HTTP1.1的默认选项</li>
<li>理想情况下，只需要耗时一个RTT</li>
</ol>
<h3 id="HTTP消息格式"><a href="#HTTP消息格式" class="headerlink" title="HTTP消息格式"></a>HTTP消息格式</h3><h4 id="HTTP请求消息"><a href="#HTTP请求消息" class="headerlink" title="HTTP请求消息"></a>HTTP请求消息</h4><pre><code>GET /somedir/page.html HTTP/1.1
Host:www.some.school.edu
User-agent:Mozilla/4.0
Connection:close
Accept-language:fr  
</code></pre><h4 id="HTTP请求消息的通用格式"><a href="#HTTP请求消息的通用格式" class="headerlink" title="HTTP请求消息的通用格式"></a>HTTP请求消息的通用格式</h4><p>method URL version<br>header filed name : value </p>
<h4 id="上传输入的方法"><a href="#上传输入的方法" class="headerlink" title="上传输入的方法"></a>上传输入的方法</h4><p>POST方法<br>GET方法（URL方法）</p>
<h4 id="HTTP1-0"><a href="#HTTP1-0" class="headerlink" title="HTTP1.0"></a>HTTP1.0</h4><ol>
<li>GET</li>
<li>POST</li>
<li><p>HEAD：请Server不要将所请求的对象放入响应消息中</p>
<h4 id="HTTP1-1"><a href="#HTTP1-1" class="headerlink" title="HTTP1.1"></a>HTTP1.1</h4><p>GET<br>POST<br>DELETE<br>HEAD </p>
<h4 id="HTTP响应消息"><a href="#HTTP响应消息" class="headerlink" title="HTTP响应消息"></a>HTTP响应消息</h4><p> HTTP/1.1 200 OK<br> Connection: close<br> Date: Thu, 06 Aug 1998 12:00:15 GMT<br> Server: APache/1.3.0 (Unix)<br> LastModified: MOn, 22 Jun 1998<br> Content-Length: 6821<br> Content-Type: text-html<br> data data</p>
</li>
</ol>
<h4 id="状态行"><a href="#状态行" class="headerlink" title="状态行"></a>状态行</h4><ol>
<li>200</li>
<li>303</li>
<li>400</li>
<li>404</li>
<li>505</li>
</ol>
<h3 id="Cookie技术"><a href="#Cookie技术" class="headerlink" title="Cookie技术"></a>Cookie技术</h3><h4 id="为什么需要Cookie"><a href="#为什么需要Cookie" class="headerlink" title="为什么需要Cookie"></a>为什么需要Cookie</h4><p>很多应用需要服务器掌握客户端的状态</p>
<h4 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h4><ol>
<li>某些网站为了辨别用户身份，进行Session跟踪而储存在用户本地终端上的数据</li>
<li>RFC6265</li>
</ol>
<h4 id="Cookie的组件"><a href="#Cookie的组件" class="headerlink" title="Cookie的组件"></a>Cookie的组件</h4><ol>
<li>HTTP响应消息的cookie头部行</li>
<li>HTTP请求消息的cookie头部行</li>
<li>保存在客户端主机上的cookie文件，由浏览器管理</li>
<li>Web服务器端的后台数据库</li>
</ol>
<h4 id="cookie的原理"><a href="#cookie的原理" class="headerlink" title="cookie的原理"></a>cookie的原理</h4><h4 id="cookie的作用"><a href="#cookie的作用" class="headerlink" title="cookie的作用"></a>cookie的作用</h4><ol>
<li>身份认证</li>
<li>购物车</li>
<li>推荐</li>
<li>web e-mail</li>
</ol>
<h3 id="Web缓存-代理服务器技术"><a href="#Web缓存-代理服务器技术" class="headerlink" title="Web缓存/代理服务器技术"></a>Web缓存/代理服务器技术</h3><p>在不访问服务的前提下满足客户端的HTTP请求</p>
<h4 id="Web缓存-代理服务器"><a href="#Web缓存-代理服务器" class="headerlink" title="Web缓存/代理服务器"></a>Web缓存/代理服务器</h4><p>浏览器向缓存或者代理服务器发送所有的HTTP请求，<br>如果有，则返回对象；如果没有，缓存服务器向源服务器发送HTTP请求，获取对象，然后返回给客户端并保存该对象</p>
<h4 id="缓存既充当客户端，也是服务器"><a href="#缓存既充当客户端，也是服务器" class="headerlink" title="缓存既充当客户端，也是服务器"></a>缓存既充当客户端，也是服务器</h4><h3 id="Email应用"><a href="#Email应用" class="headerlink" title="Email应用"></a>Email应用</h3><h3 id="应用的构成"><a href="#应用的构成" class="headerlink" title="应用的构成"></a>应用的构成</h3><ol>
<li>邮件客户端</li>
<li>邮件服务器</li>
<li>SMTP协议</li>
</ol>
<h4 id="邮件服务器"><a href="#邮件服务器" class="headerlink" title="邮件服务器"></a>邮件服务器</h4><p>邮箱：存储发给该用户的Email<br>消息队列：存储等待发送的Email</p>
<h4 id="SMTP协议：2821"><a href="#SMTP协议：2821" class="headerlink" title="SMTP协议：2821"></a>SMTP协议：2821</h4><p>邮件服务器之间传递消息所使用的协议<br>使用TCP进行email消息的可靠传输<br>端口25<br>传输的三个阶段  </p>
<ol>
<li>握手  </li>
<li>消息的传入  </li>
<li>关闭  </li>
</ol>
<p>使用的是命令效应的交互模式<br>Email消息只能包含7位ASICC码</p>
<h4 id="SMTP交互示例"><a href="#SMTP交互示例" class="headerlink" title="SMTP交互示例"></a>SMTP交互示例</h4><h3 id="email格式与pop3协议-、"><a href="#email格式与pop3协议-、" class="headerlink" title="email格式与pop3协议  ###、"></a>email格式与pop3协议  ###、</h3><h4 id="email格式"><a href="#email格式" class="headerlink" title="email格式"></a>email格式</h4><p>头部行<br>消息体</p>
<h4 id="Email消息格式：多媒体拓展"><a href="#Email消息格式：多媒体拓展" class="headerlink" title="Email消息格式：多媒体拓展"></a>Email消息格式：多媒体拓展</h4><h4 id="MIME：多媒体邮件拓展RFC2045，2056"><a href="#MIME：多媒体邮件拓展RFC2045，2056" class="headerlink" title="MIME：多媒体邮件拓展RFC2045，2056"></a>MIME：多媒体邮件拓展RFC2045，2056</h4><h4 id="邮件访问协议：从服务器获取邮件"><a href="#邮件访问协议：从服务器获取邮件" class="headerlink" title="邮件访问协议：从服务器获取邮件"></a>邮件访问协议：从服务器获取邮件</h4><p>POP：Post Office Protocl RFC1939<br>IMAP:Internet Mail Access Protocal:RFC 1730<br>HTTP:163,qqMail等</p>
<h4 id="POP协议"><a href="#POP协议" class="headerlink" title="POP协议"></a>POP协议</h4><p>认证过程<br>事务阶段</p>
<h4 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h4><ol>
<li>“下载 并删除”模式</li>
<li>“下载并保持”模式：不同客户端都可以保留消息的拷贝</li>
<li>POP3是无状态的</li>
</ol>
<h4 id="IMAP协议"><a href="#IMAP协议" class="headerlink" title="IMAP协议"></a>IMAP协议</h4><p>所有消息统一保存<br>允许用户利用文件夹组织消息<br>IMAP跨Session的用户查询</p>
<h3 id="DNS概述"><a href="#DNS概述" class="headerlink" title="DNS概述"></a>DNS概述</h3><h4 id="Internet上主机-路由器的识别问题"><a href="#Internet上主机-路由器的识别问题" class="headerlink" title="Internet上主机/路由器的识别问题"></a>Internet上主机/路由器的识别问题</h4><ol>
<li>IP地址</li>
<li>域名：www.baidu.com</li>
</ol>
<h4 id="域名和IP地址之间如何映射？"><a href="#域名和IP地址之间如何映射？" class="headerlink" title="域名和IP地址之间如何映射？"></a>域名和IP地址之间如何映射？</h4><p>域名解析系统DNS  </p>
<ol>
<li>多层命名服务器构成的分布式数据库</li>
<li>应用层协议：完成名字的解析<br> Internet核心功能，用应用层协议实现<br> 网络边界复杂</li>
</ol>
<h4 id="DNS服务"><a href="#DNS服务" class="headerlink" title="DNS服务"></a>DNS服务</h4><ol>
<li>域名向IP地址的翻译</li>
<li>主机别名</li>
<li>邮件服务器别名</li>
<li>负载均衡：Web服务器<h4 id="为什么不使用集中式的DNS"><a href="#为什么不使用集中式的DNS" class="headerlink" title="为什么不使用集中式的DNS"></a>为什么不使用集中式的DNS</h4></li>
<li>单点失败问题</li>
<li>流量问题</li>
<li>距离问题</li>
<li>维护性问题</li>
</ol>
<h4 id="DNS使用的分布式层次式数据库"><a href="#DNS使用的分布式层次式数据库" class="headerlink" title="DNS使用的分布式层次式数据库"></a>DNS使用的分布式层次式数据库</h4><h4 id="DNS根域名服务器"><a href="#DNS根域名服务器" class="headerlink" title="DNS根域名服务器"></a>DNS根域名服务器</h4><p>如果不知道映射，访问权威服务器</p>
<h4 id="TLD和权威域名解析服务器"><a href="#TLD和权威域名解析服务器" class="headerlink" title="TLD和权威域名解析服务器"></a>TLD和权威域名解析服务器</h4><ol>
<li>顶级域名服务器  </li>
<li>权威域名服务器</li>
</ol>
<h4 id="本地域名解析服务器"><a href="#本地域名解析服务器" class="headerlink" title="本地域名解析服务器"></a>本地域名解析服务器</h4><ol>
<li>不严格属于层次体系</li>
<li>每个ISP有一个本地域名服务器</li>
<li>当主机进行DNS查询时，查询被发送到本地域名服务器：作为代理，将查询转发给域名解析服务器系统</li>
</ol>
<h4 id="DNS查询实例"><a href="#DNS查询实例" class="headerlink" title="DNS查询实例"></a>DNS查询实例</h4><ol>
<li>迭代查询</li>
<li>递归查询</li>
</ol>
<h3 id="DNS记录和消息格式"><a href="#DNS记录和消息格式" class="headerlink" title="DNS记录和消息格式"></a>DNS记录和消息格式</h3><h4 id="DNS记录"><a href="#DNS记录" class="headerlink" title="DNS记录"></a>DNS记录</h4><p>资源记录（RR，resource records）  </p>
<ol>
<li>Type=A：Nam=主机域名，Value=IP地址</li>
<li>Type=NS：Name=域，Value=该域权威域名解析服务器的主机域名</li>
<li>Type=CNAME：Name=某一真实域名的别名</li>
<li>Type=MX：value是与name相对应的邮件服务器</li>
</ol>
<h4 id="DNS协议与消息"><a href="#DNS协议与消息" class="headerlink" title="DNS协议与消息"></a>DNS协议与消息</h4><p>DNS消息：  </p>
<ol>
<li>查询和回复</li>
<li>消息格式相同</li>
</ol>
<h4 id="消息头部"><a href="#消息头部" class="headerlink" title="消息头部"></a>消息头部</h4><ol>
<li>Identification：16位查询编号，回复使用相同的编号</li>
<li>flags：查询或回复，期望递归，递归可用，权威回答</li>
</ol>
<h2 id="P2P应用"><a href="#P2P应用" class="headerlink" title="P2P应用"></a>P2P应用</h2><h3 id="纯P2P结构"><a href="#纯P2P结构" class="headerlink" title="纯P2P结构"></a>纯P2P结构</h3><ol>
<li>没有服务器</li>
<li>任意端系统之间直接通信</li>
<li>节点阶段性接入Internet</li>
<li>节点可能直接更换IP地址</li>
</ol>
<h4 id="BT：文件分发BitTorrent使用的是P2P架构"><a href="#BT：文件分发BitTorrent使用的是P2P架构" class="headerlink" title="BT：文件分发BitTorrent使用的是P2P架构"></a>BT：文件分发BitTorrent使用的是P2P架构</h4><h4 id="获取chunk"><a href="#获取chunk" class="headerlink" title="获取chunk"></a>获取chunk</h4><ol>
<li>给定任一时刻，不同的节点持有文件的不同chunk集合</li>
<li>节点定期查询每个邻居所持有的chunk列表</li>
<li>节点发送请求，请求获取确实的chunk</li>
<li>稀缺优先</li>
</ol>
<h4 id="发送chunk"><a href="#发送chunk" class="headerlink" title="发送chunk"></a>发送chunk</h4><p>发送速率最快的4个，每10秒重新评估top4<br>每30秒随机选择一个其他节点，向其发送chunk</p>
<h2 id="P2P应用：索引技术"><a href="#P2P应用：索引技术" class="headerlink" title="P2P应用：索引技术"></a>P2P应用：索引技术</h2><h3 id="P2P：搜索信息"><a href="#P2P：搜索信息" class="headerlink" title="P2P：搜索信息"></a>P2P：搜索信息</h3><p>P2P 系统的索引：信息到节点的位置(IP地址+端口号)的映射</p>
<h3 id="集中式索引"><a href="#集中式索引" class="headerlink" title="集中式索引"></a>集中式索引</h3><p>每个节点向中央服务器报告自己的IP地址和内容</p>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><ol>
<li>单点失效问题</li>
<li>性能瓶颈</li>
<li>版权问题</li>
</ol>
<h3 id="洪泛式查询"><a href="#洪泛式查询" class="headerlink" title="洪泛式查询"></a>洪泛式查询</h3><ol>
<li>完全分布式架构</li>
<li>每个节点对它共享的文件进行索引，且只对她共享的文件进行索引</li>
</ol>
<h4 id="覆盖网络"><a href="#覆盖网络" class="headerlink" title="覆盖网络"></a>覆盖网络</h4><ol>
<li>节点X与Y之间如果有TCP连接，那么构成一个边</li>
<li>所有的活动节点和边构成覆盖网络</li>
<li>边：虚拟链路</li>
<li>节点一般邻居数至少十个</li>
</ol>
<h4 id="查询消息通过已有的TCP连接发送"><a href="#查询消息通过已有的TCP连接发送" class="headerlink" title="查询消息通过已有的TCP连接发送"></a>查询消息通过已有的TCP连接发送</h4><h4 id="节点转发查询消息"><a href="#节点转发查询消息" class="headerlink" title="节点转发查询消息"></a>节点转发查询消息</h4><h4 id="如果查询命中，则利用反向路径发回查询节点"><a href="#如果查询命中，则利用反向路径发回查询节点" class="headerlink" title="如果查询命中，则利用反向路径发回查询节点"></a>如果查询命中，则利用反向路径发回查询节点</h4><h3 id="层次性覆盖网络"><a href="#层次性覆盖网络" class="headerlink" title="层次性覆盖网络"></a>层次性覆盖网络</h3><p>介于集中式索引和洪泛查询之间的方法</p>
<h4 id="每个节点或者是一个超级节点，或者被分配一个超级节点"><a href="#每个节点或者是一个超级节点，或者被分配一个超级节点" class="headerlink" title="每个节点或者是一个超级节点，或者被分配一个超级节点"></a>每个节点或者是一个超级节点，或者被分配一个超级节点</h4><ol>
<li>节点和超级节点之间维持TCP连接</li>
<li>某些超级节点对之间维持TCP连接</li>
</ol>
<h2 id="Socket编程-应用编程接口-API"><a href="#Socket编程-应用编程接口-API" class="headerlink" title="Socket编程-应用编程接口(API)"></a>Socket编程-应用编程接口(API)</h2><h3 id="网络程序设计接口"><a href="#网络程序设计接口" class="headerlink" title="网络程序设计接口"></a>网络程序设计接口</h3><h3 id="应用编程接口API"><a href="#应用编程接口API" class="headerlink" title="应用编程接口API"></a>应用编程接口API</h3><p>应用进程之间通讯是通过应用层协议交互的：利用传输层传输</p>
<h4 id="需要将应用程序的报文交给下一层处理"><a href="#需要将应用程序的报文交给下一层处理" class="headerlink" title="需要将应用程序的报文交给下一层处理"></a>需要将应用程序的报文交给下一层处理</h4><h4 id="应用层和传输层如何交互呢？"><a href="#应用层和传输层如何交互呢？" class="headerlink" title="应用层和传输层如何交互呢？"></a>应用层和传输层如何交互呢？</h4><p>通过应用编程接口</p>
<h4 id="就是应用进程的控制权和操作系统的控制权进行转换的一个系统调用接口"><a href="#就是应用进程的控制权和操作系统的控制权进行转换的一个系统调用接口" class="headerlink" title="就是应用进程的控制权和操作系统的控制权进行转换的一个系统调用接口"></a>就是应用进程的控制权和操作系统的控制权进行转换的一个系统调用接口</h4><h3 id="几种典型的应用编程接口"><a href="#几种典型的应用编程接口" class="headerlink" title="几种典型的应用编程接口"></a>几种典型的应用编程接口</h3><p>套接字接口，Berkeley Unix<br>微软也采用了套接字接口API，WINSOCK<br>TLI：AT&amp;T为其UNIX系统V定义的一种API</p>
<h3 id="Socket-API"><a href="#Socket-API" class="headerlink" title="Socket API"></a>Socket API</h3><h4 id="最初设计"><a href="#最初设计" class="headerlink" title="最初设计"></a>最初设计</h4><ol>
<li>面向BSD UNIX-Berkeley</li>
<li>面向TCP/IP协议栈接口</li>
</ol>
<h4 id="目前"><a href="#目前" class="headerlink" title="目前"></a>目前</h4><ol>
<li>事实上的工业标准</li>
<li>绝大多数操作系统都支持</li>
</ol>
<h4 id="通信模型"><a href="#通信模型" class="headerlink" title="通信模型"></a>通信模型</h4><p>C/S客户/服务器</p>
<h4 id="应用进程间通信的抽象机制"><a href="#应用进程间通信的抽象机制" class="headerlink" title="应用进程间通信的抽象机制"></a>应用进程间通信的抽象机制</h4><h4 id="怎么样说明与服务器端哪一个套接字通信？"><a href="#怎么样说明与服务器端哪一个套接字通信？" class="headerlink" title="怎么样说明与服务器端哪一个套接字通信？"></a>怎么样说明与服务器端哪一个套接字通信？</h4><p>IP地址</p>
<h4 id="给套接字编号"><a href="#给套接字编号" class="headerlink" title="给套接字编号"></a>给套接字编号</h4><p>端口号</p>
<h4 id="表示通信端点（对外）"><a href="#表示通信端点（对外）" class="headerlink" title="表示通信端点（对外）"></a>表示通信端点（对外）</h4><p>IP地址+端口号</p>
<h4 id="操作系统-进程如何管理套接字（对内）"><a href="#操作系统-进程如何管理套接字（对内）" class="headerlink" title="操作系统/进程如何管理套接字（对内）"></a>操作系统/进程如何管理套接字（对内）</h4><p>套接字描述符</p>
<h4 id="Socket抽象"><a href="#Socket抽象" class="headerlink" title="Socket抽象"></a>Socket抽象</h4><ol>
<li>类似文件的抽象</li>
<li>当应用进程创建套接字时，操作系统分配一个数据结构存储套接字相关信息</li>
<li>返回套接字描述符</li>
</ol>
<h4 id="地址结构"><a href="#地址结构" class="headerlink" title="地址结构"></a>地址结构</h4><p>已定义结构sockaddr_in;<br>地址长度，端址族（AF_INET)，端口号，IP地址，未用</p>
<h3 id="Socket-API函数"><a href="#Socket-API函数" class="headerlink" title="Socket API函数"></a>Socket API函数</h3><h4 id="WSAStartup"><a href="#WSAStartup" class="headerlink" title="WSAStartup"></a>WSAStartup</h4><p>使用socker的应用程序在使用之前必须先调用此函数<br>两个参数，第一个指明程序请求时用的WinSock版本，其中高位字节指明副版本，地位字节指明主版本<br>第二参数返回实际的WinSock版本信息</p>
<h4 id="WSACleanup"><a href="#WSACleanup" class="headerlink" title="WSACleanup"></a>WSACleanup</h4><p>应用程序在完成对请求的Socket库的使用，最后调用<br>接触与Socket库的绑定<br>释放资源</p>
<h4 id="socket函数"><a href="#socket函数" class="headerlink" title="socket函数"></a>socket函数</h4><p>创建套接字<br>操作系统返回套接字描述符      </p>
<ol>
<li>第一个参数是协议族：protofamily=PF_INIT(TCP/IP)</li>
<li>第二参数是套接字类型：type=SOCK_STREAM,SOCK_DGRAM or SOCK_PAW(TCP/IP)</li>
<li>第三个参数是（协议号）：0为默认</li>
</ol>
<h4 id="Socker面向TCP-IP的服务类型"><a href="#Socker面向TCP-IP的服务类型" class="headerlink" title="Socker面向TCP/IP的服务类型"></a>Socker面向TCP/IP的服务类型</h4><p>SOCK_STREAM面向TCP，SOCK_DGRAM面向UDP，SOCK_PAW面向网络层IP，ICMP，IGMP</p>
<h4 id="TCP-可靠，面向连接，字节流传输，点对点"><a href="#TCP-可靠，面向连接，字节流传输，点对点" class="headerlink" title="TCP:可靠，面向连接，字节流传输，点对点"></a>TCP:可靠，面向连接，字节流传输，点对点</h4><h4 id="UDP-不可靠，无连接，数据报传输"><a href="#UDP-不可靠，无连接，数据报传输" class="headerlink" title="UDP:不可靠，无连接，数据报传输"></a>UDP:不可靠，无连接，数据报传输</h4><h4 id="Closesocket"><a href="#Closesocket" class="headerlink" title="Closesocket"></a>Closesocket</h4><ol>
<li>关闭一个描述符为sd的套接字</li>
<li>如果多个进程共享一个套接字，调用closesocket将套接字引用计数减一，直到0才关闭</li>
<li>一个进程中的多线程对一个套接字的使用无计数：如果关闭了，其他线程也不能使用此套接字</li>
<li>返回值：0 成功</li>
</ol>
<h4 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h4><ol>
<li>为套接字设置本地端点地址：IP地址+端口号</li>
<li>参数：套接字描述符，端点地址（sockaddr_in)</li>
<li>客户程序一般不必调用bind函数</li>
<li>服务器端？：数值端口号</li>
</ol>
<h4 id="解决方法：地址通配符-INADDR-ANY"><a href="#解决方法：地址通配符-INADDR-ANY" class="headerlink" title="解决方法：地址通配符 INADDR_ANY"></a>解决方法：地址通配符 INADDR_ANY</h4><p>在此台服务器上任何符合地址通配符的都可以访问此服务器</p>
<h4 id="listen"><a href="#listen" class="headerlink" title="listen"></a>listen</h4><ol>
<li>置服务器端的流套接字处于监听状态：进服务器端调用，仅用于面向连接的流套接字</li>
<li>设置连接请求的队列大小，返回值：0成功，否则失败</li>
</ol>
<h4 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h4><ul>
<li>客户端程序调用来使客户套接字与特定计算机的特定端口的套接字进行连接</li>
<li>只用于客户端</li>
<li>可用于TCP客户端，也可以用于UDP客户端，TCP客户端：建立TCP连接；UDP客户端：指定了服务器的端点地址</li>
</ul>
<h4 id="accept-ad-caddr-caddrlen"><a href="#accept-ad-caddr-caddrlen" class="headerlink" title="accept(ad,caddr,caddrlen)"></a>accept(ad,caddr,caddrlen)</h4><ul>
<li>服务程序调用从处于监听状态的流套接字sd的客户连接请求队列中取出排在最前的一个客户请求，并且创建一个新的套接字来与客户套接字创建连接通道</li>
<li>仅用于TCP套接字</li>
<li>仅用于服务器</li>
<li>利用新创建的套接字与客户通信（为了处理高并发的任务）</li>
</ul>
<h4 id="send-sd-buf-len-flags-sendto-sd-buf-len-flags-destaddr-addrlen"><a href="#send-sd-buf-len-flags-sendto-sd-buf-len-flags-destaddr-addrlen" class="headerlink" title="send(sd,*buf,len,flags) sendto(sd,*buf,len,flags,destaddr,addrlen)"></a>send(sd,*buf,len,flags) sendto(sd,*buf,len,flags,destaddr,addrlen)</h4><ul>
<li>send函数TCP套接字或调用了connect函数的UDP客户端套接字</li>
<li>sendto函数用于UDP服务器端套接字与未调用connect函数的UDP客户端套接字</li>
</ul>
<h4 id="recv-sd-buf-len-flags-recvfrom-sd-buf-len-flags-destaddr-addrlen"><a href="#recv-sd-buf-len-flags-recvfrom-sd-buf-len-flags-destaddr-addrlen" class="headerlink" title="recv(sd,*buf,len,flags),recvfrom(sd,*buf,len,flags,destaddr,addrlen)"></a>recv(sd,*buf,len,flags),recvfrom(sd,*buf,len,flags,destaddr,addrlen)</h4><ul>
<li>recv函数TCP套接字或调用了connect函数的UDP客户端套接字,接收服务器发来的数据</li>
<li>recvfrom函数用于UDP服务器端套接字与未调用connect函数的UDP客户端套接字</li>
</ul>
<h4 id="setsockopt-int-sd-int-level-int-optname-optval-int-optlen-getsockopt-int-sd-int-level-int-optname-optval-socklen-t-optien"><a href="#setsockopt-int-sd-int-level-int-optname-optval-int-optlen-getsockopt-int-sd-int-level-int-optname-optval-socklen-t-optien" class="headerlink" title="setsockopt(int sd.int level,int optname.optval,int optlen),getsockopt(int sd.int level,int optname.optval,socklen_t *optien)"></a>setsockopt(int sd.int level,int optname.<em>optval,int optlen),getsockopt(int sd.int level,int optname.</em>optval,socklen_t *optien)</h4><p>setsockopt用于设置套接字sd的选项参数<br>getsockopt用于获取任意类型、任意状态套接字的选项当前值，并把结果存入optval</p>
<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><ul>
<li>WSAStartup：初始化</li>
<li>WSACleanup：终止socket库的使用</li>
<li>socket：创建套接字</li>
<li>connect：“连接”远端服务器（仅用于客户端）</li>
<li>closesocket：释放/关闭套接字</li>
<li>bind:绑定套接字的本地IP地址和端口号</li>
<li>listen：置服务器端TCP套接字为监听模式，并设置队列大小，仅用于服务端</li>
<li>accept:接收/提取一个连接请求，创建新套接字，通过新套接字处理任务， 仅用于服务端</li>
<li>send：</li>
<li>sendto：</li>
<li>recv：</li>
<li>recvfrom</li>
<li>setsockopt</li>
<li>getsockopt</li>
</ul>
<h4 id="关于网络字节顺序"><a href="#关于网络字节顺序" class="headerlink" title="关于网络字节顺序"></a>关于网络字节顺序</h4><p>TCP/IP定义了标准的用于协议头中的二进制整数表示，网络字节顺序</p>
<h4 id="某些Socket-API函数的参数需要存储为网络字节顺序（IP地址，端口号等）"><a href="#某些Socket-API函数的参数需要存储为网络字节顺序（IP地址，端口号等）" class="headerlink" title="某些Socket API函数的参数需要存储为网络字节顺序（IP地址，端口号等）"></a>某些Socket API函数的参数需要存储为网络字节顺序（IP地址，端口号等）</h4><h4 id="可以实现本地字节顺序与网络字节顺序间转换的函数"><a href="#可以实现本地字节顺序与网络字节顺序间转换的函数" class="headerlink" title="可以实现本地字节顺序与网络字节顺序间转换的函数"></a>可以实现本地字节顺序与网络字节顺序间转换的函数</h4><p>htons:本-网 16bits<br>ntohs:网-本 16 bits<br>htonl:本-网 32 bits<br>ntohl:网-本 32 bits</p>
<h4 id="网络应用的Socket调用基本流程"><a href="#网络应用的Socket调用基本流程" class="headerlink" title="网络应用的Socket调用基本流程"></a>网络应用的Socket调用基本流程</h4><h3 id="解析服务器IP地址"><a href="#解析服务器IP地址" class="headerlink" title="解析服务器IP地址"></a>解析服务器IP地址</h3><ul>
<li>客户端可能使用域名或IP地址标识服务器</li>
<li>IP地址需要使用32位二进制IP地址</li>
<li>需要将域名或IP地址转换为32位IP地址：inet_addr()实现点分十进制IP地址到32位IP地址转换，gethostbyname实现域名到32位IP地址的转换</li>
</ul>
<h4 id="解析服务器（熟知）端口号"><a href="#解析服务器（熟知）端口号" class="headerlink" title="解析服务器（熟知）端口号"></a>解析服务器（熟知）端口号</h4><ul>
<li>客户端还可能使用服务名标识服务器端口（如HTTP）</li>
<li>需要将服务名转换为端口号：getservbyname获取端口号</li>
</ul>
<h4 id="解析协议号"><a href="#解析协议号" class="headerlink" title="解析协议号"></a>解析协议号</h4><ul>
<li>客户端可能使用协议名指定协议</li>
<li>需要将协议名转换为协议号：getprotobyname </li>
</ul>
<h4 id="TCP客户端软件流程"><a href="#TCP客户端软件流程" class="headerlink" title="TCP客户端软件流程"></a>TCP客户端软件流程</h4><ol>
<li>确定服务器IP地址与端口号</li>
<li>创建套接字</li>
<li>分配本地端点地址（IP地址+端口号）（系统完成）</li>
<li>连接服务器（套接字）</li>
<li>遵循应用层协议进行通信</li>
<li>关闭/释放连接</li>
</ol>
<h4 id="UDP客户端软件流程"><a href="#UDP客户端软件流程" class="headerlink" title="UDP客户端软件流程"></a>UDP客户端软件流程</h4><ol>
<li>确定服务器IP地址与端口号</li>
<li>创建套接字</li>
<li>分配本地端点地址（IP地址+端口号）（系统完成）</li>
<li>指定服务器端点地址，构造UDP数据报</li>
<li>遵循应用层协议进行通信</li>
<li>关闭/释放套接字</li>
</ol>
<h3 id="基于套接字编程服务器端软件设计"><a href="#基于套接字编程服务器端软件设计" class="headerlink" title="基于套接字编程服务器端软件设计"></a>基于套接字编程服务器端软件设计</h3><ul>
<li>循环无连接</li>
<li>循环面向连接</li>
<li>并发无连接</li>
<li>并发面向连接</li>
</ul>
<h3 id="循环无连接"><a href="#循环无连接" class="headerlink" title="循环无连接"></a>循环无连接</h3><ol>
<li>创建套接字</li>
<li>绑定端点地址</li>
<li>反复接收来自客户端的请求</li>
<li>遵循应用层协议，构造响应报文，发送给客户<h4 id="数据发送"><a href="#数据发送" class="headerlink" title="数据发送"></a>数据发送</h4>服务器端不能使用connect()函数<br>使用sendto()函数发送数据报<h4 id="获取客户端点地址"><a href="#获取客户端点地址" class="headerlink" title="获取客户端点地址"></a>获取客户端点地址</h4>调用recvfrom接收数据时，自动提取<h3 id="循环面向连接"><a href="#循环面向连接" class="headerlink" title="循环面向连接"></a>循环面向连接</h3></li>
<li>创建TCP套接字，并绑定熟知端口号</li>
<li>设置套接字为被动监听模式，准备用于服务器</li>
<li>调用accept函数接收下一个连接请求，创建新套接字用于与该客户建立连接</li>
<li>遵循应用层协议，构造响应报文，发送给客户</li>
<li>完成为特定服务后，关闭与客户之间的连接，回到步骤3<h3 id="并发无连接"><a href="#并发无连接" class="headerlink" title="并发无连接"></a>并发无连接</h3></li>
<li>主线程1：创建套接字，并绑定熟知端口号</li>
<li>主线程2：反复调用recvfrom()，接收下一个客户请求，并创建一个新线程处理该客户响应</li>
<li>子线程：接收一个特定请求</li>
<li>子线程2：依据应用层协议构造响应报文，调用sendto发送</li>
<li>子线程3：退出<h3 id="并发面向连接"><a href="#并发面向连接" class="headerlink" title="并发面向连接"></a>并发面向连接</h3></li>
<li>主线程1：创建（主）套接字，并绑定熟知端口号</li>
<li>主线程2：设置套接字为被动监听模式，准备用于服务器</li>
<li>主线程3：反复调用accept函数接收下一个连接请求(通过主套接字)，并创建一个新的子线程处理该客户响应</li>
<li>子线程1：接收一个客户的服务请求（通过新创建的套接字）；</li>
<li>子线程2：遵循应用层写协议与特定客户进行交互</li>
<li>子线程3：关闭/释放连接并退出(线程终止)</li>
</ol>
<h1 id="传入层"><a href="#传入层" class="headerlink" title="传入层"></a>传入层</h1><h4 id="理解传输层服务的基本理论和基本机制"><a href="#理解传输层服务的基本理论和基本机制" class="headerlink" title="理解传输层服务的基本理论和基本机制"></a>理解传输层服务的基本理论和基本机制</h4><ol>
<li>多路复用/分用</li>
<li>可靠数据传输机制</li>
<li>流量控制机制</li>
<li>拥塞控制机制</li>
</ol>
<h4 id="掌握Internet的传输层协议"><a href="#掌握Internet的传输层协议" class="headerlink" title="掌握Internet的传输层协议"></a>掌握Internet的传输层协议</h4><ol>
<li>UD</li>
<li>TCP</li>
<li>TCP拥塞控制</li>
</ol>
<h2 id="传输层概述"><a href="#传输层概述" class="headerlink" title="传输层概述"></a>传输层概述</h2><h4 id="传输层协议为运行在不同Host上的进程提供了一种逻辑通信机制（端到端）"><a href="#传输层协议为运行在不同Host上的进程提供了一种逻辑通信机制（端到端）" class="headerlink" title="传输层协议为运行在不同Host上的进程提供了一种逻辑通信机制（端到端）"></a>传输层协议为运行在不同Host上的进程提供了一种逻辑通信机制（端到端）</h4><h4 id="端系统运行传输层协议"><a href="#端系统运行传输层协议" class="headerlink" title="端系统运行传输层协议"></a>端系统运行传输层协议</h4><ol>
<li>发送方：将应用递交的消息分成一个或多个Segment，并向下传给网络层</li>
<li>接收方：将接收到的segment组装成消息，并且向上递交给应用层</li>
</ol>
<h4 id="传输层可以为应用提供多种协议"><a href="#传输层可以为应用提供多种协议" class="headerlink" title="传输层可以为应用提供多种协议"></a>传输层可以为应用提供多种协议</h4><ol>
<li>UDP协议</li>
<li>TCP协议</li>
</ol>
<h4 id="传输层vs网络层"><a href="#传输层vs网络层" class="headerlink" title="传输层vs网络层"></a>传输层vs网络层</h4><ol>
<li>网络层：提供主机之间的逻辑通信机制</li>
<li>传输层：提供应用进程之间的逻辑通信机制：位于网络层之上；依赖于网络层服务；对网络层进行增强</li>
</ol>
<h3 id="Internet传输层协议"><a href="#Internet传输层协议" class="headerlink" title="Internet传输层协议"></a>Internet传输层协议</h3><h4 id="可靠地、按序的交付服务-TCP-："><a href="#可靠地、按序的交付服务-TCP-：" class="headerlink" title="可靠地、按序的交付服务(TCP)："></a>可靠地、按序的交付服务(TCP)：</h4><ol>
<li>拥塞控制</li>
<li>流量控制</li>
<li>连接控制</li>
</ol>
<h4 id="不可靠的交付服务（UDP）"><a href="#不可靠的交付服务（UDP）" class="headerlink" title="不可靠的交付服务（UDP）"></a>不可靠的交付服务（UDP）</h4><p>基于尽力而为的网络层，没有做拓展</p>
<h4 id="这两种服务都没有提供延迟上的保障和带宽上的保障"><a href="#这两种服务都没有提供延迟上的保障和带宽上的保障" class="headerlink" title="这两种服务都没有提供延迟上的保障和带宽上的保障"></a>这两种服务都没有提供延迟上的保障和带宽上的保障</h4><h3 id="多路复用和多路分用"><a href="#多路复用和多路分用" class="headerlink" title="多路复用和多路分用"></a>多路复用和多路分用</h3><h4 id="why？"><a href="#why？" class="headerlink" title="why？"></a>why？</h4><p>如果某层的一个协议对应直接上层的多个协议/实体，则需要复用/分用</p>
<h4 id="多路分用：传输层依据segment头部信息或首部信息，正确的交给socket，交给正确的进程"><a href="#多路分用：传输层依据segment头部信息或首部信息，正确的交给socket，交给正确的进程" class="headerlink" title="多路分用：传输层依据segment头部信息或首部信息，正确的交给socket，交给正确的进程"></a>多路分用：传输层依据segment头部信息或首部信息，正确的交给socket，交给正确的进程</h4><h4 id="多路复用：为每一个segment套上正确的头部信息，然后交给socket，再发送出去"><a href="#多路复用：为每一个segment套上正确的头部信息，然后交给socket，再发送出去" class="headerlink" title="多路复用：为每一个segment套上正确的头部信息，然后交给socket，再发送出去"></a>多路复用：为每一个segment套上正确的头部信息，然后交给socket，再发送出去</h4><h4 id="分用如何工作"><a href="#分用如何工作" class="headerlink" title="分用如何工作"></a>分用如何工作</h4><ol>
<li>主机接收到IP数据报：每个数据报携带源IP地址，目的IP地址，携带一个传输层的段，携带源端口号和目的端口号</li>
<li>主机接收到segment之后，传输层协议提取IP地址和端口号信息，将segment导向相应的socket，TCP会做更多的处理</li>
</ol>
<h4 id="无连接分用"><a href="#无连接分用" class="headerlink" title="无连接分用"></a>无连接分用</h4><ol>
<li>利用端口号创建Socket</li>
<li>UDP的Socket用二元组标识（目的IP地址，目的端口号）</li>
<li>主机收到UDP段后：检查段中的目的端口号，将UDP段导向绑定在该端口号的Socket</li>
<li>来自不同源IP地址和/或源端口号的IP数据包被导向</li>
<li>同一个Socket</li>
</ol>
<h4 id="面向连接的分用"><a href="#面向连接的分用" class="headerlink" title="面向连接的分用"></a>面向连接的分用</h4><ol>
<li>TCP的socket用四元组标识：源IP，源端口号，目的IP，目的端口号</li>
<li>接收端利用所有的四个值将segment导向合适的socket</li>
<li>服务器可能同时支持多个TCP Socket：每个Socket用自己的四元组标识</li>
<li>Web服务器为每个客户端开不同的Socket</li>
</ol>
<h4 id="面向连接的分用-多线程Web服务器"><a href="#面向连接的分用-多线程Web服务器" class="headerlink" title="面向连接的分用:多线程Web服务器"></a>面向连接的分用:多线程Web服务器</h4><p>通过线程也可以维持TCP连接</p>
<h2 id="UDP协议"><a href="#UDP协议" class="headerlink" title="UDP协议"></a>UDP协议</h2><ol>
<li>基于Internet IP协议：复用/分用，简单的错误校验</li>
<li>“Best effort”服务，UDP段可能:丢失，非按序到达</li>
<li>无连接:UDP发送方和接收方之间不需要握手，每个UDP的处理独立于其他段</li>
</ol>
<h4 id="为什么在传输层做错误检测"><a href="#为什么在传输层做错误检测" class="headerlink" title="为什么在传输层做错误检测"></a>为什么在传输层做错误检测</h4><p>在端到端的通信过程中，不能确保所有的链路层都有错误检测，在路由器存储转发过程中也可能出现错误</p>
<h4 id="UDP存在的价值"><a href="#UDP存在的价值" class="headerlink" title="UDP存在的价值"></a>UDP存在的价值</h4><ol>
<li>无需建立连接（减少延迟）</li>
<li>实现简单：无需维护连接状态</li>
<li>头部开销少</li>
<li>没有拥塞机制：应用可更好的控制发送时间和速率</li>
</ol>
<h3 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h3><ol>
<li>常用与流媒体应用</li>
<li>DNS</li>
<li>SNMP<h4 id="在UDP上实现可靠数据传输？"><a href="#在UDP上实现可靠数据传输？" class="headerlink" title="在UDP上实现可靠数据传输？"></a>在UDP上实现可靠数据传输？</h4></li>
<li>需要在应用层增加可靠性机制</li>
<li>应用特定的错误恢复机制</li>
</ol>
<h4 id="UDP报文格式"><a href="#UDP报文格式" class="headerlink" title="UDP报文格式"></a>UDP报文格式</h4><p>source port # destport#<br>length  checksum<br>application data</p>
<h4 id="UDP校验和"><a href="#UDP校验和" class="headerlink" title="UDP校验和"></a>UDP校验和</h4><p>检测UDP段在传输中是否发生错误</p>
<h4 id="发送方"><a href="#发送方" class="headerlink" title="发送方"></a>发送方</h4><p>校验和计算：计算所有整数的和，进位加在和的后面，将得到的值按位取反，得到校验和，发送方将校验和放入校验和字段</p>
<h4 id="接收方"><a href="#接收方" class="headerlink" title="接收方"></a>接收方</h4><p>计算所收到段的校验和：将其与校验和字段进行对比：不相等，检测出错误</p>
<h2 id="可靠数据传输的基本原理"><a href="#可靠数据传输的基本原理" class="headerlink" title="可靠数据传输的基本原理"></a>可靠数据传输的基本原理</h2><h4 id="什么是可靠？"><a href="#什么是可靠？" class="headerlink" title="什么是可靠？"></a>什么是可靠？</h4><p>不错，不丢，不乱</p>
<h4 id="可靠数据传输协议"><a href="#可靠数据传输协议" class="headerlink" title="可靠数据传输协议"></a>可靠数据传输协议</h4><ol>
<li>可靠数据传输对应用层，传输层，链路层都很重要</li>
<li>网络top10问题</li>
<li>信道的不可靠特性决定了可靠数据传输协议的复杂性<h4 id="可靠数据传输协议基本结构：接口"><a href="#可靠数据传输协议基本结构：接口" class="headerlink" title="可靠数据传输协议基本结构：接口"></a>可靠数据传输协议基本结构：接口</h4></li>
<li>rdt_send：被上次应用调用，将数据交给rdt，发送给对方</li>
<li>udt_send:在不可靠信道上向接收方传输数据</li>
<li>deliver_data：被rdt调用，向上层应用交付数据</li>
<li>rdt_rcv:当数据包到达接收方信道时被调用</li>
</ol>
<h4 id="可靠数据传输协议-1"><a href="#可靠数据传输协议-1" class="headerlink" title="可靠数据传输协议"></a>可靠数据传输协议</h4><ol>
<li>渐进的设计可靠数据传输协议的发送方和接收方</li>
<li>只考虑单向数据传输：但控制信息双向流动</li>
<li>利用状态机刻画传输协议</li>
</ol>
<h4 id="Rdt1-0：可靠信道上的可靠数据传输"><a href="#Rdt1-0：可靠信道上的可靠数据传输" class="headerlink" title="Rdt1.0：可靠信道上的可靠数据传输"></a>Rdt1.0：可靠信道上的可靠数据传输</h4><p>底层信道完全可靠<br>接收方和发送方的FSM独立</p>
<h3 id="Rdt2-0"><a href="#Rdt2-0" class="headerlink" title="Rdt2.0"></a>Rdt2.0</h3><h4 id="产生位错误的信道"><a href="#产生位错误的信道" class="headerlink" title="产生位错误的信道"></a>产生位错误的信道</h4><p>底层信道可能翻转分组中的位：利用校验和检测位错误</p>
<h4 id="如何从错误中恢复？"><a href="#如何从错误中恢复？" class="headerlink" title="如何从错误中恢复？"></a>如何从错误中恢复？</h4><ol>
<li>确认机制（ACK）：接收方显式的告知发送方分组已正确接收</li>
<li>NAK：接收方显式的告知发送方分组有错误</li>
<li>发送方收到NAK后，重传分组</li>
</ol>
<h4 id="基于这种重传机智的rdt协议成为ARQ"><a href="#基于这种重传机智的rdt协议成为ARQ" class="headerlink" title="基于这种重传机智的rdt协议成为ARQ"></a>基于这种重传机智的rdt协议成为ARQ</h4><h4 id="rdt2-0引入的新机制"><a href="#rdt2-0引入的新机制" class="headerlink" title="rdt2.0引入的新机制"></a>rdt2.0引入的新机制</h4><ol>
<li>差错机制</li>
<li>接收方反馈控制消息：ACK/NAK</li>
<li>重传机制</li>
</ol>
<h4 id="停-等协议"><a href="#停-等协议" class="headerlink" title="停-等协议"></a>停-等协议</h4><ol>
<li>发送方一个状态不够了，需要两个状态：等待上层调用，等待ACK/NAK</li>
<li>接收方只有一个状态，等待下层接收方</li>
</ol>
<h4 id="rdt2-0无错误场景"><a href="#rdt2-0无错误场景" class="headerlink" title="rdt2.0无错误场景"></a>rdt2.0无错误场景</h4><h4 id="rdt2-0错误场景"><a href="#rdt2-0错误场景" class="headerlink" title="rdt2.0错误场景"></a>rdt2.0错误场景</h4><h3 id="rdt2-1和2-2"><a href="#rdt2-1和2-2" class="headerlink" title="rdt2.1和2.2"></a>rdt2.1和2.2</h3><h4 id="2-0有什么缺陷"><a href="#2-0有什么缺陷" class="headerlink" title="2.0有什么缺陷"></a>2.0有什么缺陷</h4><h4 id="如果ACK-NAK消息发送错误-被破坏会怎么样？"><a href="#如果ACK-NAK消息发送错误-被破坏会怎么样？" class="headerlink" title="如果ACK/NAK消息发送错误/被破坏会怎么样？"></a>如果ACK/NAK消息发送错误/被破坏会怎么样？</h4><ol>
<li>为ACK/NAK增加校验和，检测并纠错</li>
<li>发送方收到破坏ACK/NAK时不知道接收方发生了什么，添加额外的控制消息</li>
<li>如果ACK/NAK坏掉，发送方重传</li>
<li>不能简单地重传，产生重复分组</li>
</ol>
<h4 id="如何解决重复分组问题"><a href="#如何解决重复分组问题" class="headerlink" title="如何解决重复分组问题"></a>如何解决重复分组问题</h4><ol>
<li>序列号：发送方给每个分组增加序列号</li>
<li>接收方丢弃重复分组</li>
</ol>
<h4 id="发送方改变"><a href="#发送方改变" class="headerlink" title="发送方改变"></a>发送方改变</h4><ol>
<li>增加了状态  </li>
<li>消息坏掉就重传</li>
<li>增加了序列号</li>
</ol>
<h4 id="接收方改变"><a href="#接收方改变" class="headerlink" title="接收方改变"></a>接收方改变</h4><ol>
<li>增加了状态</li>
<li>增加了序列号</li>
<li>增加了丢弃重复分组的机制</li>
</ol>
<h4 id="rdt2-2：无NAK消息协议"><a href="#rdt2-2：无NAK消息协议" class="headerlink" title="rdt2.2：无NAK消息协议"></a>rdt2.2：无NAK消息协议</h4><ol>
<li>与rdt2.1功能相同，但是只是用ACK</li>
<li>接收方通过ACK告知最后一个被正确接收的分组</li>
<li>在ACK消息中显式的加入被确认分组的序列号</li>
<li>发送方收到重复ACK之后，采取与收到NAK消息相同的动作：重传当前分组</li>
</ol>
<h3 id="rdt3-0"><a href="#rdt3-0" class="headerlink" title="rdt3.0"></a>rdt3.0</h3><h4 id="如果信道即可能发生错误，也可能丢失分组，怎么办？"><a href="#如果信道即可能发生错误，也可能丢失分组，怎么办？" class="headerlink" title="如果信道即可能发生错误，也可能丢失分组，怎么办？"></a>如果信道即可能发生错误，也可能丢失分组，怎么办？</h4><p>“校验和+序列号+ACK+重传”够用吗？</p>
<h4 id="方法：发送方等待“合理”时间"><a href="#方法：发送方等待“合理”时间" class="headerlink" title="方法：发送方等待“合理”时间"></a>方法：发送方等待“合理”时间</h4><ol>
<li>如果没收到ACK，重传</li>
<li>如果分组或ACK只是延迟而不是丢了</li>
</ol>
<h4 id="需要定时器"><a href="#需要定时器" class="headerlink" title="需要定时器"></a>需要定时器</h4><h4 id="rdt3-0性能分析"><a href="#rdt3-0性能分析" class="headerlink" title="rdt3.0性能分析"></a>rdt3.0性能分析</h4><p>能够正确工作，但是性能很差</p>
<h4 id="网络协议限制了物理资源的利用"><a href="#网络协议限制了物理资源的利用" class="headerlink" title="网络协议限制了物理资源的利用"></a>网络协议限制了物理资源的利用</h4><p>产生性能很差的原因就是因为停等-操作</p>
<h3 id="流水线机制与滑动窗口协议"><a href="#流水线机制与滑动窗口协议" class="headerlink" title="流水线机制与滑动窗口协议"></a>流水线机制与滑动窗口协议</h3><h4 id="流水线机制：提高网络资源利用率"><a href="#流水线机制：提高网络资源利用率" class="headerlink" title="流水线机制：提高网络资源利用率"></a>流水线机制：提高网络资源利用率</h4><h4 id="流水线协议"><a href="#流水线协议" class="headerlink" title="流水线协议"></a>流水线协议</h4><p>允许发送方在收到ACK之前连续发送多个分组：更大的序列号范围，发送方和/或接收方需要更大的存储空间以缓存分组</p>
<h4 id="滑动窗口协议"><a href="#滑动窗口协议" class="headerlink" title="滑动窗口协议"></a>滑动窗口协议</h4><p>窗口：允许使用的序列号范围，窗口尺寸为N,最多有N个等待确认的消息<br>滑动窗口：随着协议的运行，窗口在序列号空间内向前滑动</p>
<h4 id="协议：GBN，SR"><a href="#协议：GBN，SR" class="headerlink" title="协议：GBN，SR"></a>协议：GBN，SR</h4><h3 id="GBN协议：Go-Back-N协议，发送方"><a href="#GBN协议：Go-Back-N协议，发送方" class="headerlink" title="GBN协议：Go-Back-N协议，发送方"></a>GBN协议：Go-Back-N协议，发送方</h3><ol>
<li>分组头部包含k-bit序列号</li>
<li>窗口尺寸为N，最多允许N个分组未确认</li>
</ol>
<h4 id="ACK-n-：确认到序列号n-包含n-的分组均已被正确接收"><a href="#ACK-n-：确认到序列号n-包含n-的分组均已被正确接收" class="headerlink" title="ACK(n)：确认到序列号n(包含n)的分组均已被正确接收"></a>ACK(n)：确认到序列号n(包含n)的分组均已被正确接收</h4><p>可能会收到重复ACK</p>
<h4 id="为空中的分组设置计时器"><a href="#为空中的分组设置计时器" class="headerlink" title="为空中的分组设置计时器"></a>为空中的分组设置计时器</h4><h4 id="超时Timeout事件：重传序列号大于等于n，还未收到ACk的所有分组-、"><a href="#超时Timeout事件：重传序列号大于等于n，还未收到ACk的所有分组-、" class="headerlink" title="超时Timeout事件：重传序列号大于等于n，还未收到ACk的所有分组 ####、"></a>超时Timeout事件：重传序列号大于等于n，还未收到ACk的所有分组 ####、</h4><h3 id="GBN协议：Go-Back-N协议，接收方"><a href="#GBN协议：Go-Back-N协议，接收方" class="headerlink" title="GBN协议：Go-Back-N协议，接收方"></a>GBN协议：Go-Back-N协议，接收方</h3><h4 id="ACK机制，发送拥有最高序列号的，已被正确接收的分组ACK"><a href="#ACK机制，发送拥有最高序列号的，已被正确接收的分组ACK" class="headerlink" title="ACK机制，发送拥有最高序列号的，已被正确接收的分组ACK"></a>ACK机制，发送拥有最高序列号的，已被正确接收的分组ACK</h4><ol>
<li>可能产生重复的ACK</li>
<li>只需要记住唯一的expectedseqnum<h4 id="乱序到达的分组"><a href="#乱序到达的分组" class="headerlink" title="乱序到达的分组"></a>乱序到达的分组</h4></li>
<li>直接丢弃：接收方没有缓存</li>
<li>重新确认序列号最大的、按序到达的分组</li>
</ol>
<h3 id="Selective-Repeat协议"><a href="#Selective-Repeat协议" class="headerlink" title="Selective Repeat协议"></a>Selective Repeat协议</h3><p>GBN缺陷：会有大量的重复的数据发送</p>
<h4 id="接收方对每个分组进行单独确认，设置缓存机制，缓存乱序到达的分组"><a href="#接收方对每个分组进行单独确认，设置缓存机制，缓存乱序到达的分组" class="headerlink" title="接收方对每个分组进行单独确认，设置缓存机制，缓存乱序到达的分组"></a>接收方对每个分组进行单独确认，设置缓存机制，缓存乱序到达的分组</h4><h4 id="发送发只重传那些没收到ACK的分组，为每个分组设置定时器"><a href="#发送发只重传那些没收到ACK的分组，为每个分组设置定时器" class="headerlink" title="发送发只重传那些没收到ACK的分组，为每个分组设置定时器"></a>发送发只重传那些没收到ACK的分组，为每个分组设置定时器</h4><h4 id="发送方窗口，接收方窗口"><a href="#发送方窗口，接收方窗口" class="headerlink" title="发送方窗口，接收方窗口"></a>发送方窗口，接收方窗口</h4><h4 id="SR协议"><a href="#SR协议" class="headerlink" title="SR协议"></a>SR协议</h4><p>发生超时事件后，重传n，并且重置计时器</p>
<h4 id="困境"><a href="#困境" class="headerlink" title="困境"></a>困境</h4><h2 id="TCP协议"><a href="#TCP协议" class="headerlink" title="TCP协议"></a>TCP协议</h2><ol>
<li>点对点</li>
<li>可靠地、按序的字节流</li>
<li>流水线机制</li>
<li>发送方/接收方缓存</li>
<li>全双工：同一连接中能够传输双向数据流</li>
<li>面向连接：端到端，TCP连接包括：缓存，连接状态变量，socket</li>
<li>流量控制机制</li>
</ol>
<h3 id="TCP段结构"><a href="#TCP段结构" class="headerlink" title="TCP段结构"></a>TCP段结构</h3><p>源端口号  目的端口号<br>序列号<br>acknowledgement number  </p>
<h3 id="TCP：序列号和ACk"><a href="#TCP：序列号和ACk" class="headerlink" title="TCP：序列号和ACk"></a>TCP：序列号和ACk</h3><ul>
<li>序列号：序列号指的是segment中第一个字节的编号，不是segment的编号，建立TCP链接时，随机选择序列号</li>
<li>ACKS：希望接受到的下一个字节的序列号，累计确认：该序列号之前的所有字节均已被正确接收到<h4 id="接收方如何处理乱序到达的Segment，TCP规范中没有规定，由TCP的实现者决策"><a href="#接收方如何处理乱序到达的Segment，TCP规范中没有规定，由TCP的实现者决策" class="headerlink" title="接收方如何处理乱序到达的Segment，TCP规范中没有规定，由TCP的实现者决策"></a>接收方如何处理乱序到达的Segment，TCP规范中没有规定，由TCP的实现者决策</h4></li>
</ul>
<h3 id="TCP可靠数据传输概述"><a href="#TCP可靠数据传输概述" class="headerlink" title="TCP可靠数据传输概述"></a>TCP可靠数据传输概述</h3><ol>
<li>TCP在IP层提供的不可靠服务基础上实现可靠数据传输服务</li>
<li>流水线机制</li>
<li>累积确认</li>
<li>TCP使用单一重传定时器</li>
<li>触发重传的时间：超时，收到重复ACK</li>
<li>渐进式：暂不考虑重复ACK，暂不考虑流量控制，暂不考虑拥塞机制</li>
</ol>
<h3 id="RTT和超时"><a href="#RTT和超时" class="headerlink" title="RTT和超时"></a>RTT和超时</h3><h4 id="如何设置定时器的超时时间"><a href="#如何设置定时器的超时时间" class="headerlink" title="如何设置定时器的超时时间"></a>如何设置定时器的超时时间</h4><ol>
<li>大于RTT</li>
<li>过短</li>
<li>过长</li>
</ol>
<h4 id="如何估计RTT"><a href="#如何估计RTT" class="headerlink" title="如何估计RTT"></a>如何估计RTT</h4><ol>
<li>SampleRTT：测量从段发出去到收到ACK的时间：忽略重传</li>
<li>SampleRTT变化：测量多个SampleRTT，求平均值，形成RTT的估计值<h4 id="RTT-“安全边界”"><a href="#RTT-“安全边界”" class="headerlink" title="RTT+“安全边界”"></a>RTT+“安全边界”</h4></li>
</ol>
<h4 id="TCP发送方事件"><a href="#TCP发送方事件" class="headerlink" title="TCP发送方事件"></a>TCP发送方事件</h4><p>从应用层收到数据：  </p>
<ul>
<li>创建segment</li>
<li>序列号是segment第一个字节的编号</li>
<li>开启计时器</li>
<li>设置超时时间</li>
</ul>
<p>超时：重传引起超时的segment，重启定时器<br>收到ACK：确认此前未确认的segment，更新sendBase，如果还有未被确认的分组，重新启动计时器</p>
<h4 id="TCP-ACK生成"><a href="#TCP-ACK生成" class="headerlink" title="TCP ACK生成"></a>TCP ACK生成</h4><h4 id="快速重传机制"><a href="#快速重传机制" class="headerlink" title="快速重传机制"></a>快速重传机制</h4><p>如果发生了超时的话，会重新设置时间间隔，并且加倍</p>
<h4 id="通过重复ACK检测分组丢失"><a href="#通过重复ACK检测分组丢失" class="headerlink" title="通过重复ACK检测分组丢失"></a>通过重复ACK检测分组丢失</h4><h4 id="如果sender收到对同一数据的3个ACK，则假定该数据之后的段已经丢失"><a href="#如果sender收到对同一数据的3个ACK，则假定该数据之后的段已经丢失" class="headerlink" title="如果sender收到对同一数据的3个ACK，则假定该数据之后的段已经丢失"></a>如果sender收到对同一数据的3个ACK，则假定该数据之后的段已经丢失</h4><h3 id="TCP流量控制"><a href="#TCP流量控制" class="headerlink" title="TCP流量控制"></a>TCP流量控制</h3><p>接收方为TCP连接分配buffer：发送方不会传输的太多、太快以至于淹没接收方</p>
<h4 id="速度匹配机制"><a href="#速度匹配机制" class="headerlink" title="速度匹配机制"></a>速度匹配机制</h4><h4 id="假定丢掉乱序的segment"><a href="#假定丢掉乱序的segment" class="headerlink" title="假定丢掉乱序的segment"></a>假定丢掉乱序的segment</h4><p>Receiver通过segment的头部将字段将可接受数据大小告诉sender，sender限制自己已经发送的但还未收到ACK的数据不超过接收方的空闲RcvWindow尺寸<br>RcvWindow=0，仍然可以发一个很小的段  </p>
<h3 id="TCP连接管理"><a href="#TCP连接管理" class="headerlink" title="TCP连接管理"></a>TCP连接管理</h3><ol>
<li>在传输数据之前需要建立连接  </li>
<li>初始化变量，分配内存等  </li>
<li>Client：连接发起者</li>
<li>Server：等待客户连接请求</li>
</ol>
<h4 id="TCP连接的三次握手"><a href="#TCP连接的三次握手" class="headerlink" title="TCP连接的三次握手"></a>TCP连接的三次握手</h4><ol>
<li>发送TCP SYN置1</li>
<li>答复SYNACK，服务器初始化</li>
<li>client发送ACK segment，可以包含数据</li>
</ol>
<h4 id="TCP连接的关闭：四次挥手"><a href="#TCP连接的关闭：四次挥手" class="headerlink" title="TCP连接的关闭：四次挥手"></a>TCP连接的关闭：四次挥手</h4><ol>
<li>client向server发送TCP FIN控制segment</li>
<li>server收到FIN，回复ACK，关闭连接，发送FIN</li>
<li>client收到FIN，发送ACK</li>
<li>server收到ACK，关闭连接</li>
</ol>
<h2 id="拥塞控制原理：top10问题"><a href="#拥塞控制原理：top10问题" class="headerlink" title="拥塞控制原理：top10问题"></a>拥塞控制原理：top10问题</h2><h3 id="拥塞控制"><a href="#拥塞控制" class="headerlink" title="拥塞控制"></a>拥塞控制</h3><p>非正式定义：“太多发送主机发送了太多数据或者发送速度太快以至于网络无法处理”<br>表现：分组丢失，分组延迟过大</p>
<h4 id="拥塞控制vs流量控制"><a href="#拥塞控制vs流量控制" class="headerlink" title="拥塞控制vs流量控制"></a>拥塞控制vs流量控制</h4><h3 id="拥塞的成因和代价：场景1"><a href="#拥塞的成因和代价：场景1" class="headerlink" title="拥塞的成因和代价：场景1"></a>拥塞的成因和代价：场景1</h3><ol>
<li>两个senders，两个receivers</li>
<li>一个路由器，无限缓存</li>
<li>没有重传</li>
</ol>
<h4 id="拥塞时分组延迟太大，达到最大throughput"><a href="#拥塞时分组延迟太大，达到最大throughput" class="headerlink" title="拥塞时分组延迟太大，达到最大throughput"></a>拥塞时分组延迟太大，达到最大throughput</h4><h4 id="拥塞的代价，对给定的“goodput”，要做更多的工作，造成资源的浪费"><a href="#拥塞的代价，对给定的“goodput”，要做更多的工作，造成资源的浪费" class="headerlink" title="拥塞的代价，对给定的“goodput”，要做更多的工作，造成资源的浪费"></a>拥塞的代价，对给定的“goodput”，要做更多的工作，造成资源的浪费</h4><h3 id="拥塞控制的方法"><a href="#拥塞控制的方法" class="headerlink" title="拥塞控制的方法"></a>拥塞控制的方法</h3><p>端到端的拥塞控制：端系统通过观察loss，delay等网络行为判断是否发生拥塞，TCP采取这种方法<br>网路辅助的拥塞控制：路由器向发送方显式返回网络拥塞信息</p>
<h3 id="sender限制发送速率"><a href="#sender限制发送速率" class="headerlink" title="sender限制发送速率"></a>sender限制发送速率</h3><p>动态调整以改变发送速率<br>反映所感知到的网络拥塞</p>
<h4 id="如何感知网络拥塞"><a href="#如何感知网络拥塞" class="headerlink" title="如何感知网络拥塞"></a>如何感知网络拥塞</h4><p>loss事件=timeout或三个重复ACK，发生loss事件后，发送方降低速率</p>
<h4 id="如何合理的调整发送速率"><a href="#如何合理的调整发送速率" class="headerlink" title="如何合理的调整发送速率"></a>如何合理的调整发送速率</h4><p>加性曾-乘性减：AIMD<br>慢启动：SS</p>
<h4 id="AIMD"><a href="#AIMD" class="headerlink" title="AIMD"></a>AIMD</h4><p>原理：逐渐增加发送速率，谨慎探测可用带宽，直到发生loss</p>
<h4 id="TCP慢启动：SS"><a href="#TCP慢启动：SS" class="headerlink" title="TCP慢启动：SS"></a>TCP慢启动：SS</h4><p>TCP建立时，指数性增长，因为初始速率很慢</p>
<h4 id="loss事件的处理"><a href="#loss事件的处理" class="headerlink" title="loss事件的处理"></a>loss事件的处理</h4><p>3个重复ACKs；CongWin切到一半，然后线性增长<br>Timeout：CongWin直接设为1个MSS，然后指数增长，达到threshold后线性增长</p>
<h3 id="TCP性能分析"><a href="#TCP性能分析" class="headerlink" title="TCP性能分析"></a>TCP性能分析</h3><h4 id="平均吞吐率为0-75W-RTT"><a href="#平均吞吐率为0-75W-RTT" class="headerlink" title="平均吞吐率为0.75W/RTT"></a>平均吞吐率为0.75W/RTT</h4><h4 id="高速网络下需要设计新的TCP"><a href="#高速网络下需要设计新的TCP" class="headerlink" title="高速网络下需要设计新的TCP"></a>高速网络下需要设计新的TCP</h4><h4 id="TCP的公平性"><a href="#TCP的公平性" class="headerlink" title="TCP的公平性"></a>TCP的公平性</h4><h1 id="网络层-1"><a href="#网络层-1" class="headerlink" title="网络层"></a>网络层</h1><ol>
<li>从发送主机向接收主机传送数据段  </li>
<li>发送主机：将数据段封装到数据报中 </li>
<li>接受主机：向传输层交付数据段  </li>
<li>每个主机和路由器都运行网络协议  </li>
<li>路由器检验所有穿越它的IP数据报的头部域</li>
</ol>
<h3 id="网络层核心功能：转发与路由"><a href="#网络层核心功能：转发与路由" class="headerlink" title="网络层核心功能：转发与路由"></a>网络层核心功能：转发与路由</h3><p>转发：将分组从路由器的输入端口转移到合适的输出端口<br>路由：确定分组从源到目的经过的路径（路由算法）</p>
<h4 id="每个路由应该维护一个转发表"><a href="#每个路由应该维护一个转发表" class="headerlink" title="每个路由应该维护一个转发表"></a>每个路由应该维护一个转发表</h4><h3 id="网络层核心功能-连接建立"><a href="#网络层核心功能-连接建立" class="headerlink" title="网络层核心功能-连接建立"></a>网络层核心功能-连接建立</h3><p>某些网络的重要功能<br>网络分组传输之前两端主机需要先建立虚拟/逻辑连接：网络设备（如路由）参与连接的建立</p>
<h3 id="网络层服务模型"><a href="#网络层服务模型" class="headerlink" title="网络层服务模型"></a>网络层服务模型</h3><h4 id="无连接服务："><a href="#无连接服务：" class="headerlink" title="无连接服务："></a>无连接服务：</h4><ol>
<li>不事先为系列分组的传输确定传输路径  </li>
<li>每个分组独立确定传输路径  </li>
<li>不同分组可能传输路径不同<br>最有代表性的：数据报网络<h4 id="连接服务"><a href="#连接服务" class="headerlink" title="连接服务"></a>连接服务</h4></li>
<li>首先为系列分组的传输确定从源到目的经过的路径</li>
<li>然后沿改路径传输系列分组  </li>
<li>系列分组传输路径相同  </li>
<li>传输结束后拆除连接<br>最有代表性的：虚电路网络</li>
</ol>
<h3 id="虚电路网络"><a href="#虚电路网络" class="headerlink" title="虚电路网络"></a>虚电路网络</h3><p>一条从源主机到目的主机，类似于电路的路径（逻辑连接）：分组交换，每个分组的传输利用链路的全部带宽，源到目的路径经过的网络层设备共同完成虚电路功能</p>
<h4 id="通信过程"><a href="#通信过程" class="headerlink" title="通信过程"></a>通信过程</h4><p>呼叫建立，数据传输，拆除呼叫</p>
<h4 id="每个分组携带虚电路标识（VC-ID），而不是目的主机地址"><a href="#每个分组携带虚电路标识（VC-ID），而不是目的主机地址" class="headerlink" title="每个分组携带虚电路标识（VC ID），而不是目的主机地址"></a>每个分组携带虚电路标识（VC ID），而不是目的主机地址</h4><h4 id="虚电路经过的每个网络设备，维护每条经过它的虚电路连接状态"><a href="#虚电路经过的每个网络设备，维护每条经过它的虚电路连接状态" class="headerlink" title="虚电路经过的每个网络设备，维护每条经过它的虚电路连接状态"></a>虚电路经过的每个网络设备，维护每条经过它的虚电路连接状态</h4><h4 id="链路、网络设备资源可以面向VC进行预分配"><a href="#链路、网络设备资源可以面向VC进行预分配" class="headerlink" title="链路、网络设备资源可以面向VC进行预分配"></a>链路、网络设备资源可以面向VC进行预分配</h4><h4 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h4><p>每条虚电路包括：  </p>
<ol>
<li>从源主机到目的主机的一条路径</li>
<li>虚电路号（VCID），沿路没锻炼路一个编号  </li>
<li>沿路每个网络层设备，利用转发表记录经过的每条虚电路  </li>
</ol>
<h4 id="沿某条虚电路传输的分组，携带的对应虚电路VCID，而不是目的地址"><a href="#沿某条虚电路传输的分组，携带的对应虚电路VCID，而不是目的地址" class="headerlink" title="沿某条虚电路传输的分组，携带的对应虚电路VCID，而不是目的地址"></a>沿某条虚电路传输的分组，携带的对应虚电路VCID，而不是目的地址</h4><h4 id="同一条VC，在每段链路上的VCID通常不同"><a href="#同一条VC，在每段链路上的VCID通常不同" class="headerlink" title="同一条VC，在每段链路上的VCID通常不同"></a>同一条VC，在每段链路上的VCID通常不同</h4><h4 id="VC转发表"><a href="#VC转发表" class="headerlink" title="VC转发表"></a>VC转发表</h4><h4 id="虚电路信令协议"><a href="#虚电路信令协议" class="headerlink" title="虚电路信令协议"></a>虚电路信令协议</h4><ol>
<li>用于VC的建立，维护和拆除</li>
<li>应用于虚电路网络</li>
<li>目前Internet不采用</li>
</ol>
<h3 id="数据报网络"><a href="#数据报网络" class="headerlink" title="数据报网络"></a>数据报网络</h3><ol>
<li>网络层无连接</li>
<li>每个分组携带目的地址</li>
<li>路由器根据分组的目的地址转发分组：根据路由协议/算法构建转发表，检索转发表，每个分组独立选择</li>
</ol>
<h4 id="数据报转发表"><a href="#数据报转发表" class="headerlink" title="数据报转发表"></a>数据报转发表</h4><p>表中存储的是一个IP范围<br>最长前缀匹配优先原则</p>
<h4 id="数据报网络-or-VC网络？"><a href="#数据报网络-or-VC网络？" class="headerlink" title="数据报网络 or VC网络？"></a>数据报网络 or VC网络？</h4><p>Internet网络  </p>
<ol>
<li>计算机之间交换</li>
<li>链路类型众多</li>
<li>“智能”端系统</li>
<li>简化网络，复杂“边缘”</li>
</ol>
<p>ATM  </p>
<ol>
<li>电话网络演化而来</li>
<li>核心业务是实时对话</li>
<li>“哑”端系统</li>
<li>简化“边缘”，复杂网络</li>
</ol>
<h2 id="IPV4协议"><a href="#IPV4协议" class="headerlink" title="IPV4协议"></a>IPV4协议</h2><h3 id="Internet网络层"><a href="#Internet网络层" class="headerlink" title="Internet网络层"></a>Internet网络层</h3><h4 id="主机、路由器网络层主要功能"><a href="#主机、路由器网络层主要功能" class="headerlink" title="主机、路由器网络层主要功能"></a>主机、路由器网络层主要功能</h4><ol>
<li>路由协议：路径选择，RIP，OSPF，BGP</li>
<li>路由转发表</li>
<li>IP协议：寻址规约，数据报格式，分组处理规约<h4 id="IP数据报格式"><a href="#IP数据报格式" class="headerlink" title="IP数据报格式"></a>IP数据报格式</h4>首部，数据（TCP，UDP段）<h4 id="首部"><a href="#首部" class="headerlink" title="首部"></a>首部</h4>固定部分：20字节<br>可变部分</li>
</ol>
<p>固定部分：<br>第一行：版本号4bit，首部长度4bit，服务类型（TOS）8bit（期望获得什么样的服务），总长度16bit<br>第二行：标识16bit，标志位，片偏移<br>第三行：生存时间（TLL）8bit一个IP分组可以在网络中的经过的路由器，协议8bit指示IP协议封装的是哪一个协议的报文，首部校验和16bit对IP首部进行差异检测、<br>第四行：源IP地址<br>第五行：目的IP地址  </p>
<h4 id="选项字段站长度可变，记录在1-40B之间，携带安全，源选路径，时间戳和路由记录等内容每个"><a href="#选项字段站长度可变，记录在1-40B之间，携带安全，源选路径，时间戳和路由记录等内容每个" class="headerlink" title="选项字段站长度可变，记录在1-40B之间，携带安全，源选路径，时间戳和路由记录等内容每个"></a>选项字段站长度可变，记录在1-40B之间，携带安全，源选路径，时间戳和路由记录等内容每个</h4><h4 id="填充域，补齐前面的32位格式"><a href="#填充域，补齐前面的32位格式" class="headerlink" title="填充域，补齐前面的32位格式"></a>填充域，补齐前面的32位格式</h4><h3 id="IP分片"><a href="#IP分片" class="headerlink" title="IP分片"></a>IP分片</h3><h4 id="最大传输单元（MTU）"><a href="#最大传输单元（MTU）" class="headerlink" title="最大传输单元（MTU）"></a>最大传输单元（MTU）</h4><p>网络链路存在MTU-链路层数帧可封装数据的上限：不同链路的MTU不同</p>
<h4 id="IP分片与重组"><a href="#IP分片与重组" class="headerlink" title="IP分片与重组"></a>IP分片与重组</h4><p>大IP分组向较小MTU链路转发时，可以被“分片”（允许分组则分组）：<br>一个IP分组分为多片IP分组<br>IP分片到达目的主机后进行“重组”<br>IP首部的相关字段用于标识分片以及确定分片的相对顺序（总长度，标识，标志位，片偏移）</p>
<h4 id="标识"><a href="#标识" class="headerlink" title="标识"></a>标识</h4><p>占16位，标识一个IP分组：IP协议利用一个计数器，每产生IP分组计数器加1，作为该IP分组的标识  </p>
<h4 id="标志位"><a href="#标志位" class="headerlink" title="标志位"></a>标志位</h4><p>占3bit：<br>DF（Dont Fragment）：是否允许分片，为0可以分片<br>MF（More Fragment）：为1，非最后一片，为0最后一片</p>
<h4 id="片偏移"><a href="#片偏移" class="headerlink" title="片偏移"></a>片偏移</h4><p>占13字节，一个IP分组分片封装原IP分组数据的相对偏移量<br>片偏移字段以8字节为单位</p>
<h4 id="IP分片过程"><a href="#IP分片过程" class="headerlink" title="IP分片过程"></a>IP分片过程</h4><h3 id="IP编址"><a href="#IP编址" class="headerlink" title="IP编址"></a>IP编址</h3><h4 id="IP分组"><a href="#IP分组" class="headerlink" title="IP分组"></a>IP分组</h4><ol>
<li>源地址  </li>
<li>目的地址</li>
</ol>
<h4 id="接口：主机-路由器与物理链路的连接"><a href="#接口：主机-路由器与物理链路的连接" class="headerlink" title="接口：主机/路由器与物理链路的连接"></a>接口：主机/路由器与物理链路的连接</h4><ol>
<li>实现网络层功能  </li>
<li>路由器通常有多个接口  </li>
<li>主机通常有一个或两个接口</li>
</ol>
<h4 id="IP地址：32bit"><a href="#IP地址：32bit" class="headerlink" title="IP地址：32bit"></a>IP地址：32bit</h4><p>编号标识主机、路由器的接口</p>
<h4 id="IP地址与每个接口关联"><a href="#IP地址与每个接口关联" class="headerlink" title="IP地址与每个接口关联"></a>IP地址与每个接口关联</h4><h4 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h4><p>网络号：高位比特<br>主机号：低位比特</p>
<h4 id="IP子网"><a href="#IP子网" class="headerlink" title="IP子网"></a>IP子网</h4><p>IP地址具有相同网络号的设备接口<br>不跨越路由器可以彼此物理联通的接口</p>
<h3 id="IP地址-1"><a href="#IP地址-1" class="headerlink" title="IP地址"></a>IP地址</h3><p>A类地址：50%前八位是网络号<br>B类地址：25%前16位是网络号<br>C类地址：12.5%前24位是网络号<br>D类地址：6.25%命名或者标识互联网中的一组主机，只能作为接收端，多播地址<br>E类地址：6.25%保留作为研究使用</p>
<h4 id="特殊IP地址"><a href="#特殊IP地址" class="headerlink" title="特殊IP地址"></a>特殊IP地址</h4><p>网络号 主机号<br>0.0.0.0 在本网内表示本机<br>0 + 特定值 表示本网内的特定主机<br>全1 本网广播地址<br>特定值 + 0 表示一个服务<br>特定值 + 1，直接广播地址<br>127 + 非全零或非全1 作为本地软件环回测试，成为环回地址  </p>
<h4 id="私有IP地址"><a href="#私有IP地址" class="headerlink" title="私有IP地址"></a>私有IP地址</h4><p>A：10<br>B：172.16 to 172.31<br>C：192.168.0 to 192.168.255</p>
<h3 id="IP子网划分和子网掩码"><a href="#IP子网划分和子网掩码" class="headerlink" title="IP子网划分和子网掩码"></a>IP子网划分和子网掩码</h3><h4 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h4><p>形如IP地址<br>网络号和子网号全部取1<br>主机号全取0</p>
<h4 id="子网掩码的应用"><a href="#子网掩码的应用" class="headerlink" title="子网掩码的应用"></a>子网掩码的应用</h4><p>将IP分组的目的IP地址与子网掩码按位与运算，提取子网地址</p>
<h3 id="CIDR：无类域间路由"><a href="#CIDR：无类域间路由" class="headerlink" title="CIDR：无类域间路由"></a>CIDR：无类域间路由</h3><p>消除传统的A类，B类和C类的地址界限<br>融合子网地址和子网掩码，方便子网划分</p>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p>提高IPv4地址空间分配效率<br>提高路由效率<br>路由聚合</p>
<h3 id="DHCP协议"><a href="#DHCP协议" class="headerlink" title="DHCP协议"></a>DHCP协议</h3><h4 id="如何获得IP地址"><a href="#如何获得IP地址" class="headerlink" title="如何获得IP地址"></a>如何获得IP地址</h4><p>“硬编码”</p>
<h4 id="动态主机配置协议-DHCP"><a href="#动态主机配置协议-DHCP" class="headerlink" title="动态主机配置协议-DHCP"></a>动态主机配置协议-DHCP</h4><p>从服务器获取：IP地址，子网掩码，默认网关地址，DNS服务器名称与IP地址<br>即插即用<br>允许地址重用<br>支持在线用户地址续租<br>支持移动网络用户加入网络</p>
<h4 id="DHCP工作过程"><a href="#DHCP工作过程" class="headerlink" title="DHCP工作过程"></a>DHCP工作过程</h4><p>主机广播“DHCP discover”<br>DHCP服务器利用“DHCP offer”进行相应<br>主机请求IP地址<br>DHCP服务器分配地址  </p>
<h3 id="网络地址转换（NAT）"><a href="#网络地址转换（NAT）" class="headerlink" title="网络地址转换（NAT）"></a>网络地址转换（NAT）</h3><h4 id="动机"><a href="#动机" class="headerlink" title="动机"></a>动机</h4><p>只能/需从ISP申请一个IP地址<br>本地网络设备IP地址的变更，无需通告外界网络<br>变更ISP时，无需修改内部网络设备的IP地址<br>内部网络设备对外界网络不可见，即不可直接寻址</p>
<h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><p>替换：利用（NAT IP地址，新端口号）替换每个外出IP数据报的（源IP地址，源端口号）<br>记录：将替换信息存储到NAT转换表中<br>替换：根据NAT转换表，利用（源IP地址，源端口号）替换为每个进入内网IP数据报的（目的IP地址，目的端口号），即（NAT IP地址，新端口号）</p>
<h4 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h4><p>16bit端口号字段：可以同时支持60000多并行连接</p>
<h4 id="争议"><a href="#争议" class="headerlink" title="争议"></a>争议</h4><p>路由器应该只处理第三层功能<br>违背端到端的通信原则：应用开发者必须考虑到NAT的存在<br>地址短缺问题应该由IPv6解决</p>
<h4 id="NAT穿透问题"><a href="#NAT穿透问题" class="headerlink" title="NAT穿透问题"></a>NAT穿透问题</h4><p>使用静态配置NAT<br>利用UPnP 互联网网关设备协议（IGD）自动配置<br>中继：NAT内部的客户与中继服务器建立连接，外部客户也与中继服务器建立连接，中继服务器桥接两个连接的分组</p>
<h3 id="ICMP互联网控制报文协议"><a href="#ICMP互联网控制报文协议" class="headerlink" title="ICMP互联网控制报文协议"></a>ICMP互联网控制报文协议</h3><p>差错报告<br>网络探询</p>
<h4 id="差错报告报文"><a href="#差错报告报文" class="headerlink" title="差错报告报文"></a>差错报告报文</h4><p>目的不可达<br>源抑制<br>超时/超期<br>参数问题<br>重定向</p>
<h4 id="网络探询报文"><a href="#网络探询报文" class="headerlink" title="网络探询报文"></a>网络探询报文</h4><p>回声请求与应答报文<br>时间戳请求和应答报文</p>
<h4 id="例外情况"><a href="#例外情况" class="headerlink" title="例外情况"></a>例外情况</h4><p>对ICMP差错报文不发送<br>除第一个IP数据报分片外，后面不发<br>多播不发<br>特殊地址不发</p>
<h4 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h4><p>头部8个字节：<br>数据部分</p>
<h4 id="ICMP报文封装到IP报文里面"><a href="#ICMP报文封装到IP报文里面" class="headerlink" title="ICMP报文封装到IP报文里面"></a>ICMP报文封装到IP报文里面</h4><h3 id="IPv6：简介"><a href="#IPv6：简介" class="headerlink" title="IPv6：简介"></a>IPv6：简介</h3><h2 id="路由算法"><a href="#路由算法" class="headerlink" title="路由算法"></a>路由算法</h2><h3 id="网络抽象-图"><a href="#网络抽象-图" class="headerlink" title="网络抽象:图"></a>网络抽象:图</h3><p>路由器会被抽象成节点，物理链路被抽象成边，链路的成本被抽象为权重（权重根据需要设置） </p>
<h4 id="静态路由"><a href="#静态路由" class="headerlink" title="静态路由"></a>静态路由</h4><p>手工配置<br>路由更新慢<br>优先级高</p>
<h4 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h4><p>路由更新快：定期更新，及时响应链路费用或网络拓扑变化</p>
<p>###全局信息vs分散信息？ ###</p>
<h4 id="全局信息"><a href="#全局信息" class="headerlink" title="全局信息"></a>全局信息</h4><p>所有路由器掌握完整的网络拓扑和链路费用信息：路由算法  </p>
<h4 id="分散信息"><a href="#分散信息" class="headerlink" title="分散信息"></a>分散信息</h4><p>路由器只掌握物理相连的邻居及链路费用<br>邻居间信息交换、运算的迭代过程：距离向量路由算法</p>
<h3 id="链路状态路由算法"><a href="#链路状态路由算法" class="headerlink" title="链路状态路由算法"></a>链路状态路由算法</h3><p>Dijkstra算法：  </p>
<ol>
<li>所有节点掌握网络拓扑和链路费用：通过“链路状态广播”发送出去，所有节点拥有相同信息</li>
<li>计算从一个节点到达所有其他节点的最短路径</li>
<li>经过k次迭代后，得到到达k个目的节点的最短路径</li>
</ol>
<h3 id="距离向量路由算法"><a href="#距离向量路由算法" class="headerlink" title="距离向量路由算法"></a>距离向量路由算法</h3><p>Bellman-Ford方程（动态规划）</p>
<h4 id="异步迭代"><a href="#异步迭代" class="headerlink" title="异步迭代"></a>异步迭代</h4><p>引发每次局部迭代的因素：局部链路费用改变，来自邻居DV更新<br>分布式：每个节点只当DV变化时才通告给邻居</p>
<h4 id="每个节点"><a href="#每个节点" class="headerlink" title="每个节点"></a>每个节点</h4><p>等待：本丢局部链路费用变化或收到邻居的DV更新——&gt;重新估计DV——&gt;如果DV发生了改变，通告给所有的邻居</p>
<h4 id="链路费用变化"><a href="#链路费用变化" class="headerlink" title="链路费用变化"></a>链路费用变化</h4><p>重新检测本地链路费用变化<br>更新路由信息，重新计算距离向量<br>如果DV改变，通告所有邻居</p>
<h4 id="无穷计数问题：坏消息传播慢"><a href="#无穷计数问题：坏消息传播慢" class="headerlink" title="无穷计数问题：坏消息传播慢"></a>无穷计数问题：坏消息传播慢</h4><h4 id="毒性逆转"><a href="#毒性逆转" class="headerlink" title="毒性逆转"></a>毒性逆转</h4><p>如果达到某个节点到达某个节点的最短路径费用是通过某个邻居得到的，则：通过给该邻居节点到达该节点的目的距离为无穷大</p>
<h4 id="定义最大度量"><a href="#定义最大度量" class="headerlink" title="定义最大度量"></a>定义最大度量</h4><p>定义一个最大的有效费用值，如15跳步，16跳步表示无穷大</p>
<h3 id="层次路由"><a href="#层次路由" class="headerlink" title="层次路由"></a>层次路由</h3><p>将任意规模网络抽象成一张图计算——过于理想化  </p>
<p>标识所有路由器<br>“扁平”网络  </p>
<p>在实际中不可行</p>
<h4 id="必须考虑网络规模和网络的管理自治"><a href="#必须考虑网络规模和网络的管理自治" class="headerlink" title="必须考虑网络规模和网络的管理自治"></a>必须考虑网络规模和网络的管理自治</h4><p>聚合路由器为一个区域：自制系统AS<br>同一AS内的路由器运行相同的路由协议（算法）  </p>
<h4 id="每一个自治系统都有一个网关路由器"><a href="#每一个自治系统都有一个网关路由器" class="headerlink" title="每一个自治系统都有一个网关路由器"></a>每一个自治系统都有一个网关路由器</h4><p>位于AS“边缘”<br>通过链路连接其他AS</p>
<h4 id="自治系统间路由任务"><a href="#自治系统间路由任务" class="headerlink" title="自治系统间路由任务"></a>自治系统间路由任务</h4><p>AS1必须：  </p>
<p>学习到那些目的网络可以通过AS2到达，哪些可以通过AS3到达<br>讲这些网络可达性信息传播给AS1内部路由器</p>
<h4 id="热土豆路由：将分组发送给最近的网管路由器"><a href="#热土豆路由：将分组发送给最近的网管路由器" class="headerlink" title="热土豆路由：将分组发送给最近的网管路由器"></a>热土豆路由：将分组发送给最近的网管路由器</h4><h2 id="Internet路由"><a href="#Internet路由" class="headerlink" title="Internet路由"></a>Internet路由</h2><h3 id="AS内部路由"><a href="#AS内部路由" class="headerlink" title="AS内部路由"></a>AS内部路由</h3><p>Internet采用层次路由<br>AS内部路由协议也被称为内部网络协议IGP  </p>
<h4 id="最常见的AS内部路由协议"><a href="#最常见的AS内部路由协议" class="headerlink" title="最常见的AS内部路由协议"></a>最常见的AS内部路由协议</h4><p>路由信息协议：RIP<br>开放最短路径优先：OSPF<br>内部网关路由协议</p>
<h3 id="RIP协议"><a href="#RIP协议" class="headerlink" title="RIP协议"></a>RIP协议</h3><p>1982年发布<br>距离向量路由算法：距离度量：跳步数，每条链路一个跳步，每隔30秒，邻居之间交换一次DV，形成通告，每次通告，最多25个目的子网</p>
<h4 id="RIP：链路失效，恢复"><a href="#RIP：链路失效，恢复" class="headerlink" title="RIP：链路失效，恢复"></a>RIP：链路失效，恢复</h4><p>如果180秒没有收到通告——邻居/链路失效  </p>
<p>经过该邻居的路由不可用<br>向邻居发送新的通告<br>邻居再依次向外发送通告<br>能够快速传播到全网？<br>毒性逆转技术用于乒乓环路</p>
<h4 id="RIP路由表的处理"><a href="#RIP路由表的处理" class="headerlink" title="RIP路由表的处理"></a>RIP路由表的处理</h4><p>利用一个称作route-d的应用层进行进行管理：应用层实现<br>通告报文周期性的通过UDP数据报文发送</p>
<h3 id="OSPF"><a href="#OSPF" class="headerlink" title="OSPF"></a>OSPF</h3><p>“开放”：公众可用<br>采用链路状态路由算法：LS分组扩散，每个路由器构造完整的网络（AS）拓扑图，利用Dikstrra算法计算路由<br>OSPF通告中每个入口对应一个邻居<br>OSPF通告在整个AS范围泛洪：报文直接封装到IP报文中<br>与OSPF及其相似的一个路由协议：IS-IS路由协议</p>
<h4 id="OSPF优点"><a href="#OSPF优点" class="headerlink" title="OSPF优点"></a>OSPF优点</h4><p>安全：所有OSPF报文可以被认证<br>允许使用多条相同费用的路径（RIP只能选一条）<br>对于每条链路，可以针对不同的TOS设置多个不同的费用度量<br>集成单播路由与多播路由：多播OSPF协议与OSPF利用相同的网络拓扑数据<br>OSPF支持对大规模的AS分层</p>
<h3 id="BGP协议"><a href="#BGP协议" class="headerlink" title="BGP协议"></a>BGP协议</h3><p>边界网关协议：事实上的标准域间路由协议，将Internet“粘合”为一个整体的关键<br>BGP为每个AS提供了一种手段：eBGP：从邻居AS获取子网可达性信息；iBGP：向所有AS内部路由器传播子网可达性信息与策略，确定到达其他网络的 “好”路径<br>容许子网向Internet其余部分通告它的存在：“我在这儿”</p>
<h4 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h4><p>BGP会话：两个BGP路由器交换BGP报文：前往去往不同目的前缀的路径，报文交换基于半永久的TCP连接<br>BGP报文：OPEN报文：与Peer建立TCP连接，并认证发送方，UPDATE：通告新路径，KEEPALIVE：在无UPDATE时，保活连接，也用于对OPEN报文的确认，NOTIFICATION：报告先前报文的差错，也被用于关闭连接</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/02/13/Servlet与JSP学习笔记/" rel="next" title="Servlet与JSP学习笔记">
                <i class="fa fa-chevron-left"></i> Servlet与JSP学习笔记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/02/19/深入理解java虚拟机/" rel="prev" title="深入理解java虚拟机（前7章）">
                深入理解java虚拟机（前7章） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="John Doe" />
          <p class="site-author-name" itemprop="name">John Doe</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#计算机网络概述上"><span class="nav-number">1.</span> <span class="nav-text">计算机网络概述上</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是计算机网络"><span class="nav-number">1.0.1.</span> <span class="nav-text">什么是计算机网络</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#距离远、规模很大时怎么连接？"><span class="nav-number">1.0.1.1.</span> <span class="nav-text">距离远、规模很大时怎么连接？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#交换网络"><span class="nav-number">1.0.1.2.</span> <span class="nav-text">交换网络</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是Internet"><span class="nav-number">1.0.1.3.</span> <span class="nav-text">什么是Internet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数以百万级的互联的计算设备的集合：主机-端系统"><span class="nav-number">1.0.1.4.</span> <span class="nav-text">数以百万级的互联的计算设备的集合：主机/端系统</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#通过通信链路连接在一起"><span class="nav-number">1.0.1.5.</span> <span class="nav-text">通过通信链路连接在一起</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组交换"><span class="nav-number">1.0.1.6.</span> <span class="nav-text">分组交换</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么需要网络协议"><span class="nav-number">1.0.2.</span> <span class="nav-text">为什么需要网络协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#任何通信或信息交换过程都需要规则"><span class="nav-number">1.0.2.1.</span> <span class="nav-text">任何通信或信息交换过程都需要规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#网络协议是为进行网络中的数据交换而建立的规则、标准或约定"><span class="nav-number">1.0.2.2.</span> <span class="nav-text">网络协议是为进行网络中的数据交换而建立的规则、标准或约定</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#协议规定了通信实体之间所交换的信息的格式、意义、顺序以及针对收到信息或发生的事件所采取的的“动作”"><span class="nav-number">1.0.2.3.</span> <span class="nav-text">协议规定了通信实体之间所交换的信息的格式、意义、顺序以及针对收到信息或发生的事件所采取的的“动作”</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#协议的三要素"><span class="nav-number">1.0.3.</span> <span class="nav-text">协议的三要素</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#协议规范了网络中的所有信息发送和接收过程"><span class="nav-number">1.0.3.1.</span> <span class="nav-text">协议规范了网络中的所有信息发送和接收过程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Internet结构"><span class="nav-number">1.0.4.</span> <span class="nav-text">Internet结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#端系统通过接入ISP（access-ISPs）连接到Internet"><span class="nav-number">1.0.4.1.</span> <span class="nav-text">端系统通过接入ISP（access ISPs）连接到Internet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#接入ISP必须进一步互连"><span class="nav-number">1.0.4.2.</span> <span class="nav-text">接入ISP必须进一步互连</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#构成复杂的网络互连的网络"><span class="nav-number">1.0.4.3.</span> <span class="nav-text">构成复杂的网络互连的网络</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ISP是如何互连在一起的呢？"><span class="nav-number">1.0.5.</span> <span class="nav-text">ISP是如何互连在一起的呢？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#构建一个全球ISP"><span class="nav-number">1.0.5.1.</span> <span class="nav-text">构建一个全球ISP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ISP之间也必须互连"><span class="nav-number">1.0.5.2.</span> <span class="nav-text">ISP之间也必须互连</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#区域IXP"><span class="nav-number">1.0.5.3.</span> <span class="nav-text">区域IXP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#一级ISPs"><span class="nav-number">1.0.5.4.</span> <span class="nav-text">一级ISPs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#内容提供商网络"><span class="nav-number">1.0.5.5.</span> <span class="nav-text">内容提供商网络</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据交换"><span class="nav-number">1.0.6.</span> <span class="nav-text">数据交换</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#为什么需要数据交换"><span class="nav-number">1.0.6.1.</span> <span class="nav-text">为什么需要数据交换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#交换？"><span class="nav-number">1.0.6.2.</span> <span class="nav-text">交换？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数据交换的类型"><span class="nav-number">1.0.6.3.</span> <span class="nav-text">数据交换的类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#电路交换"><span class="nav-number">1.0.6.4.</span> <span class="nav-text">电路交换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如何共享电路交换网络中的中继线？"><span class="nav-number">1.0.6.5.</span> <span class="nav-text">如何共享电路交换网络中的中继线？</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多路复用"><span class="nav-number">1.0.7.</span> <span class="nav-text">多路复用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基本原理"><span class="nav-number">1.0.7.1.</span> <span class="nav-text">基本原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#典型多路复用方法"><span class="nav-number">1.0.7.2.</span> <span class="nav-text">典型多路复用方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#报文交换和分组交换"><span class="nav-number">1.0.8.</span> <span class="nav-text">报文交换和分组交换</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#报文"><span class="nav-number">1.0.8.1.</span> <span class="nav-text">报文</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组交换-1"><span class="nav-number">1.0.8.2.</span> <span class="nav-text">分组交换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#统计多路复用"><span class="nav-number">1.0.8.3.</span> <span class="nav-text">统计多路复用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#存储-转发"><span class="nav-number">1.0.8.4.</span> <span class="nav-text">存储-转发</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对比两种交换方式"><span class="nav-number">1.0.9.</span> <span class="nav-text">对比两种交换方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#分组交换：传输延迟"><span class="nav-number">1.0.9.1.</span> <span class="nav-text">分组交换：传输延迟</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#计算机网络概述下"><span class="nav-number">2.</span> <span class="nav-text">计算机网络概述下</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#计算机网络性能"><span class="nav-number">2.1.</span> <span class="nav-text">计算机网络性能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#速率"><span class="nav-number">2.1.0.1.</span> <span class="nav-text">速率</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#带宽"><span class="nav-number">2.1.0.2.</span> <span class="nav-text">带宽</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#延迟-时延"><span class="nav-number">2.1.0.3.</span> <span class="nav-text">延迟/时延</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四种分组延迟"><span class="nav-number">2.1.0.4.</span> <span class="nav-text">四种分组延迟</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#时延带宽积"><span class="nav-number">2.1.0.5.</span> <span class="nav-text">时延带宽积</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组丢失（丢包）"><span class="nav-number">2.1.0.6.</span> <span class="nav-text">分组丢失（丢包）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#吞吐量-率"><span class="nav-number">2.1.0.7.</span> <span class="nav-text">吞吐量/率</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#吞吐量瓶颈"><span class="nav-number">2.1.0.8.</span> <span class="nav-text">吞吐量瓶颈</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么需要计算机网络体系结构"><span class="nav-number">2.1.1.</span> <span class="nav-text">为什么需要计算机网络体系结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#计算机网络是一个非常复杂的系统，涉及许多组成部分"><span class="nav-number">2.1.1.1.</span> <span class="nav-text">计算机网络是一个非常复杂的系统，涉及许多组成部分</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分层结构"><span class="nav-number">2.1.2.</span> <span class="nav-text">分层结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#每层遵循某个-写网络协议完成本层功能"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">每层遵循某个/写网络协议完成本层功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#体系结构"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">体系结构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么要采用分层结构"><span class="nav-number">2.1.3.</span> <span class="nav-text">为什么要采用分层结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本概念"><span class="nav-number">2.1.4.</span> <span class="nav-text">基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OSI参考模型"><span class="nav-number">2.1.5.</span> <span class="nav-text">OSI参考模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#OSI参考模型解释的通信过程"><span class="nav-number">2.1.5.1.</span> <span class="nav-text">OSI参考模型解释的通信过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#为什么要数据封装"><span class="nav-number">2.1.5.2.</span> <span class="nav-text">为什么要数据封装</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#物理层功能"><span class="nav-number">2.1.6.</span> <span class="nav-text">物理层功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#接口特性"><span class="nav-number">2.1.6.1.</span> <span class="nav-text">接口特性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#主要解决的问题：比特编码"><span class="nav-number">2.1.6.2.</span> <span class="nav-text">主要解决的问题：比特编码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#定义数据率"><span class="nav-number">2.1.6.3.</span> <span class="nav-text">定义数据率</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#比特同步"><span class="nav-number">2.1.6.4.</span> <span class="nav-text">比特同步</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#传输模式"><span class="nav-number">2.1.6.5.</span> <span class="nav-text">传输模式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据链路层功能"><span class="nav-number">2.1.7.</span> <span class="nav-text">数据链路层功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#负责结点-结点的数据传输"><span class="nav-number">2.1.7.1.</span> <span class="nav-text">负责结点-结点的数据传输</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#组帧"><span class="nav-number">2.1.7.2.</span> <span class="nav-text">组帧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#物理寻址"><span class="nav-number">2.1.7.3.</span> <span class="nav-text">物理寻址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#流量控制"><span class="nav-number">2.1.7.4.</span> <span class="nav-text">流量控制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#差错控制"><span class="nav-number">2.1.7.5.</span> <span class="nav-text">差错控制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#接入-访问控制"><span class="nav-number">2.1.7.6.</span> <span class="nav-text">接入/访问控制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络层功能"><span class="nav-number">2.1.8.</span> <span class="nav-text">网络层功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#负责源主机到目的主机数据分组交付"><span class="nav-number">2.1.8.1.</span> <span class="nav-text">负责源主机到目的主机数据分组交付</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#逻辑寻址"><span class="nav-number">2.1.8.2.</span> <span class="nav-text">逻辑寻址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#路由"><span class="nav-number">2.1.8.3.</span> <span class="nav-text">路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组转发"><span class="nav-number">2.1.8.4.</span> <span class="nav-text">分组转发</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#传输层功能"><span class="nav-number">2.1.9.</span> <span class="nav-text">传输层功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#负责源-目的（端-端）进程间-完整报文传输"><span class="nav-number">2.1.9.1.</span> <span class="nav-text">负责源-目的（端-端）进程间 完整报文传输</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#连接控制"><span class="nav-number">2.1.9.2.</span> <span class="nav-text">连接控制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#流量控制-1"><span class="nav-number">2.1.9.3.</span> <span class="nav-text">流量控制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#差错控制-1"><span class="nav-number">2.1.9.4.</span> <span class="nav-text">差错控制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#会话层功能"><span class="nav-number">2.1.10.</span> <span class="nav-text">会话层功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#对话控制"><span class="nav-number">2.1.10.1.</span> <span class="nav-text">对话控制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#同步"><span class="nav-number">2.1.10.2.</span> <span class="nav-text">同步</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表示层功能"><span class="nav-number">2.1.11.</span> <span class="nav-text">表示层功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数据表示转化"><span class="nav-number">2.1.11.1.</span> <span class="nav-text">数据表示转化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#加密-解密"><span class="nav-number">2.1.11.2.</span> <span class="nav-text">加密/解密</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#压缩-解压缩"><span class="nav-number">2.1.11.3.</span> <span class="nav-text">压缩/解压缩</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#应用层功能"><span class="nav-number">2.1.12.</span> <span class="nav-text">应用层功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#支持用户通过用户代理或网络接口使用网络服务"><span class="nav-number">2.1.12.1.</span> <span class="nav-text">支持用户通过用户代理或网络接口使用网络服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#典型应用层服务"><span class="nav-number">2.1.12.2.</span> <span class="nav-text">典型应用层服务</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-IP参考模型"><span class="nav-number">2.1.13.</span> <span class="nav-text">TCP/IP参考模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#运输层"><span class="nav-number">2.1.13.1.</span> <span class="nav-text">运输层</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#网际层"><span class="nav-number">2.1.13.2.</span> <span class="nav-text">网际层</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5层参考模型"><span class="nav-number">2.1.14.</span> <span class="nav-text">5层参考模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#网络层"><span class="nav-number">2.1.14.1.</span> <span class="nav-text">网络层</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#链路层"><span class="nav-number">2.1.14.2.</span> <span class="nav-text">链路层</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#物理层"><span class="nav-number">2.1.14.3.</span> <span class="nav-text">物理层</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#应用层"><span class="nav-number">3.</span> <span class="nav-text">应用层</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#网络应用的体系结构"><span class="nav-number">3.1.</span> <span class="nav-text">网络应用的体系结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#与单机应用有哪些本质性的不同"><span class="nav-number">3.1.1.</span> <span class="nav-text">与单机应用有哪些本质性的不同</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#应采用什么养的吧体系结构"><span class="nav-number">3.1.2.</span> <span class="nav-text">应采用什么养的吧体系结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#客户机-服务器结构"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">客户机/服务器结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#P2P结构"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">P2P结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#混合结构"><span class="nav-number">3.1.2.3.</span> <span class="nav-text">混合结构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络应用间通信"><span class="nav-number">3.1.3.</span> <span class="nav-text">网络应用间通信</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#网络应用的基础：进程间通信"><span class="nav-number">3.1.3.1.</span> <span class="nav-text">网络应用的基础：进程间通信</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#同一主机上运行的进程之间如何通信"><span class="nav-number">3.1.3.2.</span> <span class="nav-text">同一主机上运行的进程之间如何通信</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#不同主机上运行的进程间如何通信"><span class="nav-number">3.1.3.3.</span> <span class="nav-text">不同主机上运行的进程间如何通信</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#套接字：Socket"><span class="nav-number">3.1.3.4.</span> <span class="nav-text">套接字：Socket</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如何寻址进程？"><span class="nav-number">3.1.3.5.</span> <span class="nav-text">如何寻址进程？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如何寻址主机？——IP地址"><span class="nav-number">3.1.3.6.</span> <span class="nav-text">如何寻址主机？——IP地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#端口号-Port-number可以寻址进程"><span class="nav-number">3.1.3.7.</span> <span class="nav-text">端口号/Port number可以寻址进程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP地址-端口号进行进程间通信"><span class="nav-number">3.1.3.8.</span> <span class="nav-text">IP地址+端口号进行进程间通信</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#应用层协议"><span class="nav-number">3.1.4.</span> <span class="nav-text">应用层协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#应用层协议的内容"><span class="nav-number">3.1.4.1.</span> <span class="nav-text">应用层协议的内容</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络应用的需求与传输层服务"><span class="nav-number">3.1.5.</span> <span class="nav-text">网络应用的需求与传输层服务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#网络应用对传输服务的需求"><span class="nav-number">3.1.5.1.</span> <span class="nav-text">网络应用对传输服务的需求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Internet提供的传输服务"><span class="nav-number">3.1.5.2.</span> <span class="nav-text">Internet提供的传输服务</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Web应用"><span class="nav-number">3.2.</span> <span class="nav-text">Web应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Web与HTTP"><span class="nav-number">3.2.1.</span> <span class="nav-text">Web与HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#网页包含多个对象"><span class="nav-number">3.2.1.1.</span> <span class="nav-text">网页包含多个对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对象的寻址"><span class="nav-number">3.2.1.2.</span> <span class="nav-text">对象的寻址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP协议概述"><span class="nav-number">3.2.1.3.</span> <span class="nav-text">HTTP协议概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#C-S结构"><span class="nav-number">3.2.1.4.</span> <span class="nav-text">C/S结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#传入层协议"><span class="nav-number">3.2.1.5.</span> <span class="nav-text">传入层协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#是一个无状态协议"><span class="nav-number">3.2.1.6.</span> <span class="nav-text">是一个无状态协议</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP连接"><span class="nav-number">3.2.2.</span> <span class="nav-text">HTTP连接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#非持久性连接"><span class="nav-number">3.2.2.1.</span> <span class="nav-text">非持久性连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#非持久性连接的问题"><span class="nav-number">3.2.2.2.</span> <span class="nav-text">非持久性连接的问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#持久性连接"><span class="nav-number">3.2.2.3.</span> <span class="nav-text">持久性连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#无流水的持久性连接"><span class="nav-number">3.2.2.4.</span> <span class="nav-text">无流水的持久性连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#带流水机制的持久性连接"><span class="nav-number">3.2.2.5.</span> <span class="nav-text">带流水机制的持久性连接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP消息格式"><span class="nav-number">3.2.3.</span> <span class="nav-text">HTTP消息格式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP请求消息"><span class="nav-number">3.2.3.1.</span> <span class="nav-text">HTTP请求消息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP请求消息的通用格式"><span class="nav-number">3.2.3.2.</span> <span class="nav-text">HTTP请求消息的通用格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#上传输入的方法"><span class="nav-number">3.2.3.3.</span> <span class="nav-text">上传输入的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP1-0"><span class="nav-number">3.2.3.4.</span> <span class="nav-text">HTTP1.0</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP1-1"><span class="nav-number">3.2.3.5.</span> <span class="nav-text">HTTP1.1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP响应消息"><span class="nav-number">3.2.3.6.</span> <span class="nav-text">HTTP响应消息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#状态行"><span class="nav-number">3.2.3.7.</span> <span class="nav-text">状态行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie技术"><span class="nav-number">3.2.4.</span> <span class="nav-text">Cookie技术</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#为什么需要Cookie"><span class="nav-number">3.2.4.1.</span> <span class="nav-text">为什么需要Cookie</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cookie"><span class="nav-number">3.2.4.2.</span> <span class="nav-text">Cookie</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cookie的组件"><span class="nav-number">3.2.4.3.</span> <span class="nav-text">Cookie的组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cookie的原理"><span class="nav-number">3.2.4.4.</span> <span class="nav-text">cookie的原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cookie的作用"><span class="nav-number">3.2.4.5.</span> <span class="nav-text">cookie的作用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Web缓存-代理服务器技术"><span class="nav-number">3.2.5.</span> <span class="nav-text">Web缓存/代理服务器技术</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Web缓存-代理服务器"><span class="nav-number">3.2.5.1.</span> <span class="nav-text">Web缓存/代理服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#缓存既充当客户端，也是服务器"><span class="nav-number">3.2.5.2.</span> <span class="nav-text">缓存既充当客户端，也是服务器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Email应用"><span class="nav-number">3.2.6.</span> <span class="nav-text">Email应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#应用的构成"><span class="nav-number">3.2.7.</span> <span class="nav-text">应用的构成</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#邮件服务器"><span class="nav-number">3.2.7.1.</span> <span class="nav-text">邮件服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SMTP协议：2821"><span class="nav-number">3.2.7.2.</span> <span class="nav-text">SMTP协议：2821</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SMTP交互示例"><span class="nav-number">3.2.7.3.</span> <span class="nav-text">SMTP交互示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#email格式与pop3协议-、"><span class="nav-number">3.2.8.</span> <span class="nav-text">email格式与pop3协议  ###、</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#email格式"><span class="nav-number">3.2.8.1.</span> <span class="nav-text">email格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Email消息格式：多媒体拓展"><span class="nav-number">3.2.8.2.</span> <span class="nav-text">Email消息格式：多媒体拓展</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MIME：多媒体邮件拓展RFC2045，2056"><span class="nav-number">3.2.8.3.</span> <span class="nav-text">MIME：多媒体邮件拓展RFC2045，2056</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#邮件访问协议：从服务器获取邮件"><span class="nav-number">3.2.8.4.</span> <span class="nav-text">邮件访问协议：从服务器获取邮件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#POP协议"><span class="nav-number">3.2.8.5.</span> <span class="nav-text">POP协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#模式"><span class="nav-number">3.2.8.6.</span> <span class="nav-text">模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IMAP协议"><span class="nav-number">3.2.8.7.</span> <span class="nav-text">IMAP协议</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS概述"><span class="nav-number">3.2.9.</span> <span class="nav-text">DNS概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Internet上主机-路由器的识别问题"><span class="nav-number">3.2.9.1.</span> <span class="nav-text">Internet上主机/路由器的识别问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#域名和IP地址之间如何映射？"><span class="nav-number">3.2.9.2.</span> <span class="nav-text">域名和IP地址之间如何映射？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS服务"><span class="nav-number">3.2.9.3.</span> <span class="nav-text">DNS服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#为什么不使用集中式的DNS"><span class="nav-number">3.2.9.4.</span> <span class="nav-text">为什么不使用集中式的DNS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS使用的分布式层次式数据库"><span class="nav-number">3.2.9.5.</span> <span class="nav-text">DNS使用的分布式层次式数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS根域名服务器"><span class="nav-number">3.2.9.6.</span> <span class="nav-text">DNS根域名服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TLD和权威域名解析服务器"><span class="nav-number">3.2.9.7.</span> <span class="nav-text">TLD和权威域名解析服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#本地域名解析服务器"><span class="nav-number">3.2.9.8.</span> <span class="nav-text">本地域名解析服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS查询实例"><span class="nav-number">3.2.9.9.</span> <span class="nav-text">DNS查询实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS记录和消息格式"><span class="nav-number">3.2.10.</span> <span class="nav-text">DNS记录和消息格式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS记录"><span class="nav-number">3.2.10.1.</span> <span class="nav-text">DNS记录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS协议与消息"><span class="nav-number">3.2.10.2.</span> <span class="nav-text">DNS协议与消息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#消息头部"><span class="nav-number">3.2.10.3.</span> <span class="nav-text">消息头部</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#P2P应用"><span class="nav-number">3.3.</span> <span class="nav-text">P2P应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#纯P2P结构"><span class="nav-number">3.3.1.</span> <span class="nav-text">纯P2P结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#BT：文件分发BitTorrent使用的是P2P架构"><span class="nav-number">3.3.1.1.</span> <span class="nav-text">BT：文件分发BitTorrent使用的是P2P架构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取chunk"><span class="nav-number">3.3.1.2.</span> <span class="nav-text">获取chunk</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#发送chunk"><span class="nav-number">3.3.1.3.</span> <span class="nav-text">发送chunk</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#P2P应用：索引技术"><span class="nav-number">3.4.</span> <span class="nav-text">P2P应用：索引技术</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#P2P：搜索信息"><span class="nav-number">3.4.1.</span> <span class="nav-text">P2P：搜索信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集中式索引"><span class="nav-number">3.4.2.</span> <span class="nav-text">集中式索引</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#问题"><span class="nav-number">3.4.2.1.</span> <span class="nav-text">问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#洪泛式查询"><span class="nav-number">3.4.3.</span> <span class="nav-text">洪泛式查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#覆盖网络"><span class="nav-number">3.4.3.1.</span> <span class="nav-text">覆盖网络</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查询消息通过已有的TCP连接发送"><span class="nav-number">3.4.3.2.</span> <span class="nav-text">查询消息通过已有的TCP连接发送</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#节点转发查询消息"><span class="nav-number">3.4.3.3.</span> <span class="nav-text">节点转发查询消息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如果查询命中，则利用反向路径发回查询节点"><span class="nav-number">3.4.3.4.</span> <span class="nav-text">如果查询命中，则利用反向路径发回查询节点</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#层次性覆盖网络"><span class="nav-number">3.4.4.</span> <span class="nav-text">层次性覆盖网络</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#每个节点或者是一个超级节点，或者被分配一个超级节点"><span class="nav-number">3.4.4.1.</span> <span class="nav-text">每个节点或者是一个超级节点，或者被分配一个超级节点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Socket编程-应用编程接口-API"><span class="nav-number">3.5.</span> <span class="nav-text">Socket编程-应用编程接口(API)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#网络程序设计接口"><span class="nav-number">3.5.1.</span> <span class="nav-text">网络程序设计接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#应用编程接口API"><span class="nav-number">3.5.2.</span> <span class="nav-text">应用编程接口API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#需要将应用程序的报文交给下一层处理"><span class="nav-number">3.5.2.1.</span> <span class="nav-text">需要将应用程序的报文交给下一层处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#应用层和传输层如何交互呢？"><span class="nav-number">3.5.2.2.</span> <span class="nav-text">应用层和传输层如何交互呢？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#就是应用进程的控制权和操作系统的控制权进行转换的一个系统调用接口"><span class="nav-number">3.5.2.3.</span> <span class="nav-text">就是应用进程的控制权和操作系统的控制权进行转换的一个系统调用接口</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#几种典型的应用编程接口"><span class="nav-number">3.5.3.</span> <span class="nav-text">几种典型的应用编程接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Socket-API"><span class="nav-number">3.5.4.</span> <span class="nav-text">Socket API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#最初设计"><span class="nav-number">3.5.4.1.</span> <span class="nav-text">最初设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#目前"><span class="nav-number">3.5.4.2.</span> <span class="nav-text">目前</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#通信模型"><span class="nav-number">3.5.4.3.</span> <span class="nav-text">通信模型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#应用进程间通信的抽象机制"><span class="nav-number">3.5.4.4.</span> <span class="nav-text">应用进程间通信的抽象机制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#怎么样说明与服务器端哪一个套接字通信？"><span class="nav-number">3.5.4.5.</span> <span class="nav-text">怎么样说明与服务器端哪一个套接字通信？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#给套接字编号"><span class="nav-number">3.5.4.6.</span> <span class="nav-text">给套接字编号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#表示通信端点（对外）"><span class="nav-number">3.5.4.7.</span> <span class="nav-text">表示通信端点（对外）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#操作系统-进程如何管理套接字（对内）"><span class="nav-number">3.5.4.8.</span> <span class="nav-text">操作系统/进程如何管理套接字（对内）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Socket抽象"><span class="nav-number">3.5.4.9.</span> <span class="nav-text">Socket抽象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#地址结构"><span class="nav-number">3.5.4.10.</span> <span class="nav-text">地址结构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Socket-API函数"><span class="nav-number">3.5.5.</span> <span class="nav-text">Socket API函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#WSAStartup"><span class="nav-number">3.5.5.1.</span> <span class="nav-text">WSAStartup</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WSACleanup"><span class="nav-number">3.5.5.2.</span> <span class="nav-text">WSACleanup</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#socket函数"><span class="nav-number">3.5.5.3.</span> <span class="nav-text">socket函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Socker面向TCP-IP的服务类型"><span class="nav-number">3.5.5.4.</span> <span class="nav-text">Socker面向TCP/IP的服务类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP-可靠，面向连接，字节流传输，点对点"><span class="nav-number">3.5.5.5.</span> <span class="nav-text">TCP:可靠，面向连接，字节流传输，点对点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UDP-不可靠，无连接，数据报传输"><span class="nav-number">3.5.5.6.</span> <span class="nav-text">UDP:不可靠，无连接，数据报传输</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Closesocket"><span class="nav-number">3.5.5.7.</span> <span class="nav-text">Closesocket</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bind"><span class="nav-number">3.5.5.8.</span> <span class="nav-text">bind</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解决方法：地址通配符-INADDR-ANY"><span class="nav-number">3.5.5.9.</span> <span class="nav-text">解决方法：地址通配符 INADDR_ANY</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#listen"><span class="nav-number">3.5.5.10.</span> <span class="nav-text">listen</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#connect"><span class="nav-number">3.5.5.11.</span> <span class="nav-text">connect</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#accept-ad-caddr-caddrlen"><span class="nav-number">3.5.5.12.</span> <span class="nav-text">accept(ad,caddr,caddrlen)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#send-sd-buf-len-flags-sendto-sd-buf-len-flags-destaddr-addrlen"><span class="nav-number">3.5.5.13.</span> <span class="nav-text">send(sd,*buf,len,flags) sendto(sd,*buf,len,flags,destaddr,addrlen)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#recv-sd-buf-len-flags-recvfrom-sd-buf-len-flags-destaddr-addrlen"><span class="nav-number">3.5.5.14.</span> <span class="nav-text">recv(sd,*buf,len,flags),recvfrom(sd,*buf,len,flags,destaddr,addrlen)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setsockopt-int-sd-int-level-int-optname-optval-int-optlen-getsockopt-int-sd-int-level-int-optname-optval-socklen-t-optien"><span class="nav-number">3.5.5.15.</span> <span class="nav-text">setsockopt(int sd.int level,int optname.optval,int optlen),getsockopt(int sd.int level,int optname.optval,socklen_t *optien)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#小结"><span class="nav-number">3.5.5.16.</span> <span class="nav-text">小结</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#关于网络字节顺序"><span class="nav-number">3.5.5.17.</span> <span class="nav-text">关于网络字节顺序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#某些Socket-API函数的参数需要存储为网络字节顺序（IP地址，端口号等）"><span class="nav-number">3.5.5.18.</span> <span class="nav-text">某些Socket API函数的参数需要存储为网络字节顺序（IP地址，端口号等）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可以实现本地字节顺序与网络字节顺序间转换的函数"><span class="nav-number">3.5.5.19.</span> <span class="nav-text">可以实现本地字节顺序与网络字节顺序间转换的函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#网络应用的Socket调用基本流程"><span class="nav-number">3.5.5.20.</span> <span class="nav-text">网络应用的Socket调用基本流程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解析服务器IP地址"><span class="nav-number">3.5.6.</span> <span class="nav-text">解析服务器IP地址</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#解析服务器（熟知）端口号"><span class="nav-number">3.5.6.1.</span> <span class="nav-text">解析服务器（熟知）端口号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解析协议号"><span class="nav-number">3.5.6.2.</span> <span class="nav-text">解析协议号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP客户端软件流程"><span class="nav-number">3.5.6.3.</span> <span class="nav-text">TCP客户端软件流程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UDP客户端软件流程"><span class="nav-number">3.5.6.4.</span> <span class="nav-text">UDP客户端软件流程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基于套接字编程服务器端软件设计"><span class="nav-number">3.5.7.</span> <span class="nav-text">基于套接字编程服务器端软件设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#循环无连接"><span class="nav-number">3.5.8.</span> <span class="nav-text">循环无连接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数据发送"><span class="nav-number">3.5.8.1.</span> <span class="nav-text">数据发送</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取客户端点地址"><span class="nav-number">3.5.8.2.</span> <span class="nav-text">获取客户端点地址</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#循环面向连接"><span class="nav-number">3.5.9.</span> <span class="nav-text">循环面向连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#并发无连接"><span class="nav-number">3.5.10.</span> <span class="nav-text">并发无连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#并发面向连接"><span class="nav-number">3.5.11.</span> <span class="nav-text">并发面向连接</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#传入层"><span class="nav-number">4.</span> <span class="nav-text">传入层</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#理解传输层服务的基本理论和基本机制"><span class="nav-number">4.0.0.1.</span> <span class="nav-text">理解传输层服务的基本理论和基本机制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#掌握Internet的传输层协议"><span class="nav-number">4.0.0.2.</span> <span class="nav-text">掌握Internet的传输层协议</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#传输层概述"><span class="nav-number">4.1.</span> <span class="nav-text">传输层概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#传输层协议为运行在不同Host上的进程提供了一种逻辑通信机制（端到端）"><span class="nav-number">4.1.0.1.</span> <span class="nav-text">传输层协议为运行在不同Host上的进程提供了一种逻辑通信机制（端到端）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#端系统运行传输层协议"><span class="nav-number">4.1.0.2.</span> <span class="nav-text">端系统运行传输层协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#传输层可以为应用提供多种协议"><span class="nav-number">4.1.0.3.</span> <span class="nav-text">传输层可以为应用提供多种协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#传输层vs网络层"><span class="nav-number">4.1.0.4.</span> <span class="nav-text">传输层vs网络层</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Internet传输层协议"><span class="nav-number">4.1.1.</span> <span class="nav-text">Internet传输层协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#可靠地、按序的交付服务-TCP-："><span class="nav-number">4.1.1.1.</span> <span class="nav-text">可靠地、按序的交付服务(TCP)：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#不可靠的交付服务（UDP）"><span class="nav-number">4.1.1.2.</span> <span class="nav-text">不可靠的交付服务（UDP）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#这两种服务都没有提供延迟上的保障和带宽上的保障"><span class="nav-number">4.1.1.3.</span> <span class="nav-text">这两种服务都没有提供延迟上的保障和带宽上的保障</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多路复用和多路分用"><span class="nav-number">4.1.2.</span> <span class="nav-text">多路复用和多路分用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#why？"><span class="nav-number">4.1.2.1.</span> <span class="nav-text">why？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多路分用：传输层依据segment头部信息或首部信息，正确的交给socket，交给正确的进程"><span class="nav-number">4.1.2.2.</span> <span class="nav-text">多路分用：传输层依据segment头部信息或首部信息，正确的交给socket，交给正确的进程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多路复用：为每一个segment套上正确的头部信息，然后交给socket，再发送出去"><span class="nav-number">4.1.2.3.</span> <span class="nav-text">多路复用：为每一个segment套上正确的头部信息，然后交给socket，再发送出去</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分用如何工作"><span class="nav-number">4.1.2.4.</span> <span class="nav-text">分用如何工作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#无连接分用"><span class="nav-number">4.1.2.5.</span> <span class="nav-text">无连接分用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#面向连接的分用"><span class="nav-number">4.1.2.6.</span> <span class="nav-text">面向连接的分用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#面向连接的分用-多线程Web服务器"><span class="nav-number">4.1.2.7.</span> <span class="nav-text">面向连接的分用:多线程Web服务器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UDP协议"><span class="nav-number">4.2.</span> <span class="nav-text">UDP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#为什么在传输层做错误检测"><span class="nav-number">4.2.0.1.</span> <span class="nav-text">为什么在传输层做错误检测</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UDP存在的价值"><span class="nav-number">4.2.0.2.</span> <span class="nav-text">UDP存在的价值</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用途"><span class="nav-number">4.2.1.</span> <span class="nav-text">用途</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#在UDP上实现可靠数据传输？"><span class="nav-number">4.2.1.1.</span> <span class="nav-text">在UDP上实现可靠数据传输？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UDP报文格式"><span class="nav-number">4.2.1.2.</span> <span class="nav-text">UDP报文格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UDP校验和"><span class="nav-number">4.2.1.3.</span> <span class="nav-text">UDP校验和</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#发送方"><span class="nav-number">4.2.1.4.</span> <span class="nav-text">发送方</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#接收方"><span class="nav-number">4.2.1.5.</span> <span class="nav-text">接收方</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#可靠数据传输的基本原理"><span class="nav-number">4.3.</span> <span class="nav-text">可靠数据传输的基本原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是可靠？"><span class="nav-number">4.3.0.1.</span> <span class="nav-text">什么是可靠？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可靠数据传输协议"><span class="nav-number">4.3.0.2.</span> <span class="nav-text">可靠数据传输协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可靠数据传输协议基本结构：接口"><span class="nav-number">4.3.0.3.</span> <span class="nav-text">可靠数据传输协议基本结构：接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可靠数据传输协议-1"><span class="nav-number">4.3.0.4.</span> <span class="nav-text">可靠数据传输协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt1-0：可靠信道上的可靠数据传输"><span class="nav-number">4.3.0.5.</span> <span class="nav-text">Rdt1.0：可靠信道上的可靠数据传输</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rdt2-0"><span class="nav-number">4.3.1.</span> <span class="nav-text">Rdt2.0</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#产生位错误的信道"><span class="nav-number">4.3.1.1.</span> <span class="nav-text">产生位错误的信道</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如何从错误中恢复？"><span class="nav-number">4.3.1.2.</span> <span class="nav-text">如何从错误中恢复？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基于这种重传机智的rdt协议成为ARQ"><span class="nav-number">4.3.1.3.</span> <span class="nav-text">基于这种重传机智的rdt协议成为ARQ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rdt2-0引入的新机制"><span class="nav-number">4.3.1.4.</span> <span class="nav-text">rdt2.0引入的新机制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#停-等协议"><span class="nav-number">4.3.1.5.</span> <span class="nav-text">停-等协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rdt2-0无错误场景"><span class="nav-number">4.3.1.6.</span> <span class="nav-text">rdt2.0无错误场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rdt2-0错误场景"><span class="nav-number">4.3.1.7.</span> <span class="nav-text">rdt2.0错误场景</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rdt2-1和2-2"><span class="nav-number">4.3.2.</span> <span class="nav-text">rdt2.1和2.2</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-0有什么缺陷"><span class="nav-number">4.3.2.1.</span> <span class="nav-text">2.0有什么缺陷</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如果ACK-NAK消息发送错误-被破坏会怎么样？"><span class="nav-number">4.3.2.2.</span> <span class="nav-text">如果ACK/NAK消息发送错误/被破坏会怎么样？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如何解决重复分组问题"><span class="nav-number">4.3.2.3.</span> <span class="nav-text">如何解决重复分组问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#发送方改变"><span class="nav-number">4.3.2.4.</span> <span class="nav-text">发送方改变</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#接收方改变"><span class="nav-number">4.3.2.5.</span> <span class="nav-text">接收方改变</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rdt2-2：无NAK消息协议"><span class="nav-number">4.3.2.6.</span> <span class="nav-text">rdt2.2：无NAK消息协议</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rdt3-0"><span class="nav-number">4.3.3.</span> <span class="nav-text">rdt3.0</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#如果信道即可能发生错误，也可能丢失分组，怎么办？"><span class="nav-number">4.3.3.1.</span> <span class="nav-text">如果信道即可能发生错误，也可能丢失分组，怎么办？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法：发送方等待“合理”时间"><span class="nav-number">4.3.3.2.</span> <span class="nav-text">方法：发送方等待“合理”时间</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#需要定时器"><span class="nav-number">4.3.3.3.</span> <span class="nav-text">需要定时器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rdt3-0性能分析"><span class="nav-number">4.3.3.4.</span> <span class="nav-text">rdt3.0性能分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#网络协议限制了物理资源的利用"><span class="nav-number">4.3.3.5.</span> <span class="nav-text">网络协议限制了物理资源的利用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#流水线机制与滑动窗口协议"><span class="nav-number">4.3.4.</span> <span class="nav-text">流水线机制与滑动窗口协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#流水线机制：提高网络资源利用率"><span class="nav-number">4.3.4.1.</span> <span class="nav-text">流水线机制：提高网络资源利用率</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#流水线协议"><span class="nav-number">4.3.4.2.</span> <span class="nav-text">流水线协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#滑动窗口协议"><span class="nav-number">4.3.4.3.</span> <span class="nav-text">滑动窗口协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#协议：GBN，SR"><span class="nav-number">4.3.4.4.</span> <span class="nav-text">协议：GBN，SR</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GBN协议：Go-Back-N协议，发送方"><span class="nav-number">4.3.5.</span> <span class="nav-text">GBN协议：Go-Back-N协议，发送方</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ACK-n-：确认到序列号n-包含n-的分组均已被正确接收"><span class="nav-number">4.3.5.1.</span> <span class="nav-text">ACK(n)：确认到序列号n(包含n)的分组均已被正确接收</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#为空中的分组设置计时器"><span class="nav-number">4.3.5.2.</span> <span class="nav-text">为空中的分组设置计时器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#超时Timeout事件：重传序列号大于等于n，还未收到ACk的所有分组-、"><span class="nav-number">4.3.5.3.</span> <span class="nav-text">超时Timeout事件：重传序列号大于等于n，还未收到ACk的所有分组 ####、</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GBN协议：Go-Back-N协议，接收方"><span class="nav-number">4.3.6.</span> <span class="nav-text">GBN协议：Go-Back-N协议，接收方</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ACK机制，发送拥有最高序列号的，已被正确接收的分组ACK"><span class="nav-number">4.3.6.1.</span> <span class="nav-text">ACK机制，发送拥有最高序列号的，已被正确接收的分组ACK</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#乱序到达的分组"><span class="nav-number">4.3.6.2.</span> <span class="nav-text">乱序到达的分组</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Selective-Repeat协议"><span class="nav-number">4.3.7.</span> <span class="nav-text">Selective Repeat协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#接收方对每个分组进行单独确认，设置缓存机制，缓存乱序到达的分组"><span class="nav-number">4.3.7.1.</span> <span class="nav-text">接收方对每个分组进行单独确认，设置缓存机制，缓存乱序到达的分组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#发送发只重传那些没收到ACK的分组，为每个分组设置定时器"><span class="nav-number">4.3.7.2.</span> <span class="nav-text">发送发只重传那些没收到ACK的分组，为每个分组设置定时器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#发送方窗口，接收方窗口"><span class="nav-number">4.3.7.3.</span> <span class="nav-text">发送方窗口，接收方窗口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SR协议"><span class="nav-number">4.3.7.4.</span> <span class="nav-text">SR协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#困境"><span class="nav-number">4.3.7.5.</span> <span class="nav-text">困境</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TCP协议"><span class="nav-number">4.4.</span> <span class="nav-text">TCP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP段结构"><span class="nav-number">4.4.1.</span> <span class="nav-text">TCP段结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP：序列号和ACk"><span class="nav-number">4.4.2.</span> <span class="nav-text">TCP：序列号和ACk</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#接收方如何处理乱序到达的Segment，TCP规范中没有规定，由TCP的实现者决策"><span class="nav-number">4.4.2.1.</span> <span class="nav-text">接收方如何处理乱序到达的Segment，TCP规范中没有规定，由TCP的实现者决策</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP可靠数据传输概述"><span class="nav-number">4.4.3.</span> <span class="nav-text">TCP可靠数据传输概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RTT和超时"><span class="nav-number">4.4.4.</span> <span class="nav-text">RTT和超时</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#如何设置定时器的超时时间"><span class="nav-number">4.4.4.1.</span> <span class="nav-text">如何设置定时器的超时时间</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如何估计RTT"><span class="nav-number">4.4.4.2.</span> <span class="nav-text">如何估计RTT</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RTT-“安全边界”"><span class="nav-number">4.4.4.3.</span> <span class="nav-text">RTT+“安全边界”</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP发送方事件"><span class="nav-number">4.4.4.4.</span> <span class="nav-text">TCP发送方事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP-ACK生成"><span class="nav-number">4.4.4.5.</span> <span class="nav-text">TCP ACK生成</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#快速重传机制"><span class="nav-number">4.4.4.6.</span> <span class="nav-text">快速重传机制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#通过重复ACK检测分组丢失"><span class="nav-number">4.4.4.7.</span> <span class="nav-text">通过重复ACK检测分组丢失</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如果sender收到对同一数据的3个ACK，则假定该数据之后的段已经丢失"><span class="nav-number">4.4.4.8.</span> <span class="nav-text">如果sender收到对同一数据的3个ACK，则假定该数据之后的段已经丢失</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP流量控制"><span class="nav-number">4.4.5.</span> <span class="nav-text">TCP流量控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#速度匹配机制"><span class="nav-number">4.4.5.1.</span> <span class="nav-text">速度匹配机制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#假定丢掉乱序的segment"><span class="nav-number">4.4.5.2.</span> <span class="nav-text">假定丢掉乱序的segment</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP连接管理"><span class="nav-number">4.4.6.</span> <span class="nav-text">TCP连接管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP连接的三次握手"><span class="nav-number">4.4.6.1.</span> <span class="nav-text">TCP连接的三次握手</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP连接的关闭：四次挥手"><span class="nav-number">4.4.6.2.</span> <span class="nav-text">TCP连接的关闭：四次挥手</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#拥塞控制原理：top10问题"><span class="nav-number">4.5.</span> <span class="nav-text">拥塞控制原理：top10问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#拥塞控制"><span class="nav-number">4.5.1.</span> <span class="nav-text">拥塞控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#拥塞控制vs流量控制"><span class="nav-number">4.5.1.1.</span> <span class="nav-text">拥塞控制vs流量控制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#拥塞的成因和代价：场景1"><span class="nav-number">4.5.2.</span> <span class="nav-text">拥塞的成因和代价：场景1</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#拥塞时分组延迟太大，达到最大throughput"><span class="nav-number">4.5.2.1.</span> <span class="nav-text">拥塞时分组延迟太大，达到最大throughput</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#拥塞的代价，对给定的“goodput”，要做更多的工作，造成资源的浪费"><span class="nav-number">4.5.2.2.</span> <span class="nav-text">拥塞的代价，对给定的“goodput”，要做更多的工作，造成资源的浪费</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#拥塞控制的方法"><span class="nav-number">4.5.3.</span> <span class="nav-text">拥塞控制的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sender限制发送速率"><span class="nav-number">4.5.4.</span> <span class="nav-text">sender限制发送速率</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#如何感知网络拥塞"><span class="nav-number">4.5.4.1.</span> <span class="nav-text">如何感知网络拥塞</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如何合理的调整发送速率"><span class="nav-number">4.5.4.2.</span> <span class="nav-text">如何合理的调整发送速率</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AIMD"><span class="nav-number">4.5.4.3.</span> <span class="nav-text">AIMD</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP慢启动：SS"><span class="nav-number">4.5.4.4.</span> <span class="nav-text">TCP慢启动：SS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#loss事件的处理"><span class="nav-number">4.5.4.5.</span> <span class="nav-text">loss事件的处理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP性能分析"><span class="nav-number">4.5.5.</span> <span class="nav-text">TCP性能分析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#平均吞吐率为0-75W-RTT"><span class="nav-number">4.5.5.1.</span> <span class="nav-text">平均吞吐率为0.75W/RTT</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#高速网络下需要设计新的TCP"><span class="nav-number">4.5.5.2.</span> <span class="nav-text">高速网络下需要设计新的TCP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP的公平性"><span class="nav-number">4.5.5.3.</span> <span class="nav-text">TCP的公平性</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#网络层-1"><span class="nav-number">5.</span> <span class="nav-text">网络层</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#网络层核心功能：转发与路由"><span class="nav-number">5.0.1.</span> <span class="nav-text">网络层核心功能：转发与路由</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#每个路由应该维护一个转发表"><span class="nav-number">5.0.1.1.</span> <span class="nav-text">每个路由应该维护一个转发表</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络层核心功能-连接建立"><span class="nav-number">5.0.2.</span> <span class="nav-text">网络层核心功能-连接建立</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络层服务模型"><span class="nav-number">5.0.3.</span> <span class="nav-text">网络层服务模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#无连接服务："><span class="nav-number">5.0.3.1.</span> <span class="nav-text">无连接服务：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#连接服务"><span class="nav-number">5.0.3.2.</span> <span class="nav-text">连接服务</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#虚电路网络"><span class="nav-number">5.0.4.</span> <span class="nav-text">虚电路网络</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#通信过程"><span class="nav-number">5.0.4.1.</span> <span class="nav-text">通信过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#每个分组携带虚电路标识（VC-ID），而不是目的主机地址"><span class="nav-number">5.0.4.2.</span> <span class="nav-text">每个分组携带虚电路标识（VC ID），而不是目的主机地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#虚电路经过的每个网络设备，维护每条经过它的虚电路连接状态"><span class="nav-number">5.0.4.3.</span> <span class="nav-text">虚电路经过的每个网络设备，维护每条经过它的虚电路连接状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#链路、网络设备资源可以面向VC进行预分配"><span class="nav-number">5.0.4.4.</span> <span class="nav-text">链路、网络设备资源可以面向VC进行预分配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#具体实现"><span class="nav-number">5.0.4.5.</span> <span class="nav-text">具体实现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#沿某条虚电路传输的分组，携带的对应虚电路VCID，而不是目的地址"><span class="nav-number">5.0.4.6.</span> <span class="nav-text">沿某条虚电路传输的分组，携带的对应虚电路VCID，而不是目的地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#同一条VC，在每段链路上的VCID通常不同"><span class="nav-number">5.0.4.7.</span> <span class="nav-text">同一条VC，在每段链路上的VCID通常不同</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#VC转发表"><span class="nav-number">5.0.4.8.</span> <span class="nav-text">VC转发表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#虚电路信令协议"><span class="nav-number">5.0.4.9.</span> <span class="nav-text">虚电路信令协议</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据报网络"><span class="nav-number">5.0.5.</span> <span class="nav-text">数据报网络</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数据报转发表"><span class="nav-number">5.0.5.1.</span> <span class="nav-text">数据报转发表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数据报网络-or-VC网络？"><span class="nav-number">5.0.5.2.</span> <span class="nav-text">数据报网络 or VC网络？</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPV4协议"><span class="nav-number">5.1.</span> <span class="nav-text">IPV4协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Internet网络层"><span class="nav-number">5.1.1.</span> <span class="nav-text">Internet网络层</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#主机、路由器网络层主要功能"><span class="nav-number">5.1.1.1.</span> <span class="nav-text">主机、路由器网络层主要功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP数据报格式"><span class="nav-number">5.1.1.2.</span> <span class="nav-text">IP数据报格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#首部"><span class="nav-number">5.1.1.3.</span> <span class="nav-text">首部</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#选项字段站长度可变，记录在1-40B之间，携带安全，源选路径，时间戳和路由记录等内容每个"><span class="nav-number">5.1.1.4.</span> <span class="nav-text">选项字段站长度可变，记录在1-40B之间，携带安全，源选路径，时间戳和路由记录等内容每个</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#填充域，补齐前面的32位格式"><span class="nav-number">5.1.1.5.</span> <span class="nav-text">填充域，补齐前面的32位格式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP分片"><span class="nav-number">5.1.2.</span> <span class="nav-text">IP分片</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#最大传输单元（MTU）"><span class="nav-number">5.1.2.1.</span> <span class="nav-text">最大传输单元（MTU）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP分片与重组"><span class="nav-number">5.1.2.2.</span> <span class="nav-text">IP分片与重组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#标识"><span class="nav-number">5.1.2.3.</span> <span class="nav-text">标识</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#标志位"><span class="nav-number">5.1.2.4.</span> <span class="nav-text">标志位</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#片偏移"><span class="nav-number">5.1.2.5.</span> <span class="nav-text">片偏移</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP分片过程"><span class="nav-number">5.1.2.6.</span> <span class="nav-text">IP分片过程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP编址"><span class="nav-number">5.1.3.</span> <span class="nav-text">IP编址</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#IP分组"><span class="nav-number">5.1.3.1.</span> <span class="nav-text">IP分组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#接口：主机-路由器与物理链路的连接"><span class="nav-number">5.1.3.2.</span> <span class="nav-text">接口：主机/路由器与物理链路的连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP地址：32bit"><span class="nav-number">5.1.3.3.</span> <span class="nav-text">IP地址：32bit</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP地址与每个接口关联"><span class="nav-number">5.1.3.4.</span> <span class="nav-text">IP地址与每个接口关联</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP地址"><span class="nav-number">5.1.3.5.</span> <span class="nav-text">IP地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP子网"><span class="nav-number">5.1.3.6.</span> <span class="nav-text">IP子网</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP地址-1"><span class="nav-number">5.1.4.</span> <span class="nav-text">IP地址</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特殊IP地址"><span class="nav-number">5.1.4.1.</span> <span class="nav-text">特殊IP地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#私有IP地址"><span class="nav-number">5.1.4.2.</span> <span class="nav-text">私有IP地址</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP子网划分和子网掩码"><span class="nav-number">5.1.5.</span> <span class="nav-text">IP子网划分和子网掩码</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#子网掩码"><span class="nav-number">5.1.5.1.</span> <span class="nav-text">子网掩码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#子网掩码的应用"><span class="nav-number">5.1.5.2.</span> <span class="nav-text">子网掩码的应用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CIDR：无类域间路由"><span class="nav-number">5.1.6.</span> <span class="nav-text">CIDR：无类域间路由</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#优点"><span class="nav-number">5.1.6.1.</span> <span class="nav-text">优点</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DHCP协议"><span class="nav-number">5.1.7.</span> <span class="nav-text">DHCP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#如何获得IP地址"><span class="nav-number">5.1.7.1.</span> <span class="nav-text">如何获得IP地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#动态主机配置协议-DHCP"><span class="nav-number">5.1.7.2.</span> <span class="nav-text">动态主机配置协议-DHCP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DHCP工作过程"><span class="nav-number">5.1.7.3.</span> <span class="nav-text">DHCP工作过程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络地址转换（NAT）"><span class="nav-number">5.1.8.</span> <span class="nav-text">网络地址转换（NAT）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#动机"><span class="nav-number">5.1.8.1.</span> <span class="nav-text">动机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#实现"><span class="nav-number">5.1.8.2.</span> <span class="nav-text">实现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#问题-1"><span class="nav-number">5.1.8.3.</span> <span class="nav-text">问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#争议"><span class="nav-number">5.1.8.4.</span> <span class="nav-text">争议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NAT穿透问题"><span class="nav-number">5.1.8.5.</span> <span class="nav-text">NAT穿透问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ICMP互联网控制报文协议"><span class="nav-number">5.1.9.</span> <span class="nav-text">ICMP互联网控制报文协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#差错报告报文"><span class="nav-number">5.1.9.1.</span> <span class="nav-text">差错报告报文</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#网络探询报文"><span class="nav-number">5.1.9.2.</span> <span class="nav-text">网络探询报文</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#例外情况"><span class="nav-number">5.1.9.3.</span> <span class="nav-text">例外情况</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#格式"><span class="nav-number">5.1.9.4.</span> <span class="nav-text">格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ICMP报文封装到IP报文里面"><span class="nav-number">5.1.9.5.</span> <span class="nav-text">ICMP报文封装到IP报文里面</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6：简介"><span class="nav-number">5.1.10.</span> <span class="nav-text">IPv6：简介</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#路由算法"><span class="nav-number">5.2.</span> <span class="nav-text">路由算法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#网络抽象-图"><span class="nav-number">5.2.1.</span> <span class="nav-text">网络抽象:图</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#静态路由"><span class="nav-number">5.2.1.1.</span> <span class="nav-text">静态路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#动态路由"><span class="nav-number">5.2.1.2.</span> <span class="nav-text">动态路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#全局信息"><span class="nav-number">5.2.1.3.</span> <span class="nav-text">全局信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分散信息"><span class="nav-number">5.2.1.4.</span> <span class="nav-text">分散信息</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#链路状态路由算法"><span class="nav-number">5.2.2.</span> <span class="nav-text">链路状态路由算法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#距离向量路由算法"><span class="nav-number">5.2.3.</span> <span class="nav-text">距离向量路由算法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#异步迭代"><span class="nav-number">5.2.3.1.</span> <span class="nav-text">异步迭代</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#每个节点"><span class="nav-number">5.2.3.2.</span> <span class="nav-text">每个节点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#链路费用变化"><span class="nav-number">5.2.3.3.</span> <span class="nav-text">链路费用变化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#无穷计数问题：坏消息传播慢"><span class="nav-number">5.2.3.4.</span> <span class="nav-text">无穷计数问题：坏消息传播慢</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#毒性逆转"><span class="nav-number">5.2.3.5.</span> <span class="nav-text">毒性逆转</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#定义最大度量"><span class="nav-number">5.2.3.6.</span> <span class="nav-text">定义最大度量</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#层次路由"><span class="nav-number">5.2.4.</span> <span class="nav-text">层次路由</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#必须考虑网络规模和网络的管理自治"><span class="nav-number">5.2.4.1.</span> <span class="nav-text">必须考虑网络规模和网络的管理自治</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#每一个自治系统都有一个网关路由器"><span class="nav-number">5.2.4.2.</span> <span class="nav-text">每一个自治系统都有一个网关路由器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自治系统间路由任务"><span class="nav-number">5.2.4.3.</span> <span class="nav-text">自治系统间路由任务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#热土豆路由：将分组发送给最近的网管路由器"><span class="nav-number">5.2.4.4.</span> <span class="nav-text">热土豆路由：将分组发送给最近的网管路由器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Internet路由"><span class="nav-number">5.3.</span> <span class="nav-text">Internet路由</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#AS内部路由"><span class="nav-number">5.3.1.</span> <span class="nav-text">AS内部路由</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#最常见的AS内部路由协议"><span class="nav-number">5.3.1.1.</span> <span class="nav-text">最常见的AS内部路由协议</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RIP协议"><span class="nav-number">5.3.2.</span> <span class="nav-text">RIP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#RIP：链路失效，恢复"><span class="nav-number">5.3.2.1.</span> <span class="nav-text">RIP：链路失效，恢复</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RIP路由表的处理"><span class="nav-number">5.3.2.2.</span> <span class="nav-text">RIP路由表的处理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OSPF"><span class="nav-number">5.3.3.</span> <span class="nav-text">OSPF</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#OSPF优点"><span class="nav-number">5.3.3.1.</span> <span class="nav-text">OSPF优点</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BGP协议"><span class="nav-number">5.3.4.</span> <span class="nav-text">BGP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基础"><span class="nav-number">5.3.4.1.</span> <span class="nav-text">基础</span></a></li></ol></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  

  
      <!-- UY BEGIN -->
      <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid="></script>
      <!-- UY END -->
  




  
  

  

  

  

  


</body>
</html>
